<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Blackprint Editor</title>
	<meta name="description" content="An experimental node to node visual programming editor">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
	<meta name="msapplication-tap-highlight" content="no"/>
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="theme-color" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta http-equiv="Expires" content="0">
	<link rel="manifest" href="/manifest.webmanifest">
	<script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/eventpine@1.0.3" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js" crossorigin="anonymous"></script>

	<!-- Use scarletsframe.modern.js for production + modern browser -->
	<!-- Use scarletsframe.dev.js for development -->
	<!-- <script src="/assets/scarletsframe.dev.js?1" crossorigin="anonymous"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/scarletsframe@0.35.28/dist/scarletsframe.dev.js" crossorigin="anonymous"></script>

	<!-- Engine must be loaded before blackprint.js -->
	<!-- <script src="/dist/engine.min.js?1760854592326" crossorigin="anonymous"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/@blackprint/engine@0.10.0/dist/engine.min.js" crossorigin="anonymous"></script>

	<!-- <script src="/dist/skeleton.min.js?1760854592363" crossorigin="anonymous"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/@blackprint/engine@0.10.0/dist/skeleton.min.js" crossorigin="anonymous"></script>

	<script type="text/javascript">
	  // Polyfill for Safari and Firefox
	  (function(){function z(a){document.write('<script src="'+a+'"><\/script>')}
		if(window.PointerEvent === void 0)
		  z('https://code.jquery.com/pep/0.4.3/pep.js');
		if(KeyframeEffect.prototype.setKeyframes === void 0){
		  KeyframeEffect.prototype.setKeyframes = function(){}
		  KeyframeEffect.prototype.getKeyframes = function(){return [{}]}
		}
	  })();

	  // 1 = Will not replace model/component value (only replace function)
	  // 2 = Replace all
	  if(sf.hotReload !== void 0)
		  sf.hotReload(1);
	</script>

	<style type="text/css">
		#loading-page{
			position: fixed;
			width: 100vw;
			height: 100vh;
			z-index: 1000;
			line-height: 100vh;
			color: #ababab;
			font-size: 20px;
			text-align: center;
			opacity: 0.9;
			background-color: #232323;
		}
	</style>
</head>
<body style="background-color:#232323">
	<div id="loading-page"></div>

	<!-- Assets Loader -->
	<script type="text/javascript">
		// Register sf.$ to global
		$ = sf.$;
		window.FileSystemFileHandle ??= class {};
		window.FileSystemDirectoryHandle ??= class {};

		// Load modules
		;(async function(){
			let url = 'https://cdn.jsdelivr.net/npm/@blackprint/sketch@0.10.0';
			let url2 = 'https://cdn.jsdelivr.net/npm/@blackprint/remote-control@0.2.0';
			let url3 = 'https://cdn.jsdelivr.net/npm/@blackprint/code-generation@0.1.1';

			// Development environment
			if(/localhost|127\.0\.0\.1/.test(location.hostname)){
				url = url2 = url3 = location.origin;
				sf.loader.timeout = 7e3;
			}

			// Load Blackprint script/style explicitly to avoid
			// browser caching when the file changed
			sf.loader.css([
				url+"/dist/blackprint.sf.css?1761649071445",
				url2+"/dist/remote-control.sf.css?1761649071441",

				// Autogenerated, keep this here, and don't modify
				//#SF-SF.CSS-BEGIN
				//#SF-SF.CSS-END

				"/assets/mycss.min.css?1761649071271",
				"/assets/custom.sf.css?1761649071447",
			]);

			sf.loader.js([
				url+"/dist/blackprint.min.js?1761649071039",
				url+"/dist/blackprint.sf.js?1761649071445",

				url2+"/dist/remote-control.min.js?1761649071023",
				url2+"/dist/remote-control.sf.js?1761649071441",

				url3+"/dist/code-generation.min.js?1761649071011",

				// Autogenerated, keep this here, and don't modify
				//#SF-SF.JS-BEGIN
				//#SF-SF.JS-END

				"/assets/editor-docs.js?1761649077545",
				"/assets/myjs.min.js?1761649071052",
				"/assets/custom.sf.js?1761709354661",
			], {ordered: true});

			// Wait until Blackprint Sketch have loaded
			// and replaced some function from the engine
			await sf.loader.task;

			// For development environment
			// Let's allow module from private CDN or somewhere
			Blackprint.allowModuleOrigin('*');

			// Load modules with this to let Blackprint differentiate
			// each imported nodes loaded from the URL
			Blackprint.loadModuleFromURL([
				// Autogenerated, keep this here, and don't modify
				//#SF-MJS-BEGIN
				//#SF-MJS-END

				// Explicit load, to avoid browser caching
				// You can remove this if `loadBrowserInterface` is true

				// Autogenerated, keep this here, and don't modify
				//#SF-SF.MJS-BEGIN
				//#SF-SF.MJS-END
			], {
				// Turn this on if you want to load .sf.js, and .sf.css
				// only with single .min.mjs
				loadBrowserInterface: false
			});
		})();

		// === Example and other assets for the editor ===
		// https://www.npmjs.com/package/scarletsframe#asset-loader
		sf.loader.css([
			'https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css',
			'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/fontawesome.min.css',
			'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/solid.min.css',
			'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/brands.min.css',
			'https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.min.css',
			"https://fonts.googleapis.com/css?family=Nunito",
			'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/vs2015.min.css',
			// 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/night-owl.min.css',
			// 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/felipec.min.css',
			// 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/agate.min.css',
		]);

		sf.loader.js([
			"https://cdn.jsdelivr.net/npm/sfdatabase-js@1.3.2/dist/SFDatabase.min.js",
			"https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.min.js",
			"https://cdn.jsdelivr.net/npm/timeplate@0.1.0",
			"https://cdn.jsdelivr.net/npm/pako@2.0.4/dist/pako.min.js",
			"https://cdn.jsdelivr.net/npm/js-base64@3.7.2/base64.min.js",
			"https://cdn.jsdelivr.net/npm/marked@4.0.18/lib/marked.umd.min.js",
			"https://cdn.jsdelivr.net/npm/cbor-x@1.4.1/dist/index.min.js",
			// "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/csharp.min.js",
			// "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/cpp.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/css.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/scss.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/dockerfile.min.js",
			// "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/graphql.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/javascript.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/typescript.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/xml.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/php.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/python.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/go.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/bash.min.js",
			"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/shell.min.js",
		]);

		;(function(){
			let loadingPage = document.querySelector('#loading-page');
			sf.loader.onProgress(function(loaded, total){
				if(loadingPage !== void 0)
					loadingPage.textContent = `Please wait ${Math.round(loaded/total*100)}%`;
			});

			$(function(){
				$('.statup-remove').remove();
				$('vw-ground').css('display', '');

				if(loadingPage !== void 0)
					loadingPage.remove();
			});
		})();
	</script>

	<!-- Preload background -->
	<div style="opacity:0" class="statup-remove">
		<img src="/assets/img/background/tile.png">
		<img src="/assets/img/background/black3.jpg">
	</div>

	<!-- src/routes/body.sf will be appended here -->
</body>
</html>