{var _Class,_Class2,_Class3;async function imports(e){return"undefined"!=typeof sf&&void 0!==sf.loader?await sf.loader.mjs(e):Promise.all(e.map(e=>import(e)))}imports.task=function(){return"undefined"!=typeof sf&&void 0!==sf.loader?sf.loader.task:null};var BlackprintEventFallback={error(e){BlackprintEventFallback.error.types[e.type](e.data||e)},"cable.rule.disallowed"({port:e,cable:t,target:n}){SmallNotif.add(`Cable connection is disallowed for (${e.iface.namespace} <-> ${n.iface.namespace})`,"red")},"cable.wrong_pair"({port:e,cable:t}){SmallNotif.add(`The cable is not suitable (${t.source}, ${e.source})`,"red")},"cable.wrong_type"({cable:e,iface:t,port:n,target:a}){SmallNotif.add(t.title+"> Port from '"+n.iface.title+" - "+n.name+"' was not an "+(a.type._name||a.type.name),"red")},"cable.wrong_type_pair"({port:e,target:t}){SmallNotif.add(`The cable type is not suitable (${t.type.name} != ${e.type.name})`,"red")},"cable.virtual_type_mismatch"({port:e,target:t}){let n=e.virtualType?.map(e=>e.name).join("|")??e.type.name,a=t.virtualType?.map(e=>e.name).join("|")??t.type.name;SmallNotif.add(`No virtual type that matched each other (${n} != ${a})`,"yellow")},"cable.duplicate_removed"({cable:e,port:t}){SmallNotif.add("Duplicated cable removed","yellow")},"cable.replaced"({cable:e,port:t}){SmallNotif.add("Cable was replaced because input doesn't support array","yellow")},"cable.unsupported_dynamic_port"({cable:e,port:t}){SmallNotif.add("Connecting cable between dynamically generated port is not supported","red")}};BlackprintEventFallback.error.types={node_port_not_found({iface:e,portName:t}){SmallNotif.add(`Node port not found for ${e.title} with name: ${t}`,"red")},node_not_found({namespace:e}){SmallNotif.add(`Node for ${e} was not found, maybe .registerNode() haven't being called?`,"red")},node_delete_not_found({iface:e}){SmallNotif.add("Node was not found on the list","red"),console.error("Node was not found on the list",e)},node_template_not_found({tagName:e,element:t}){SmallNotif.add(`It seems '${e}' HTML haven't been registered as component or can't be loaded.`,"red"),console.error("It seems '"+e+"' HTML haven't been registered as component or can't be loaded. Please double check the interface file path or name, the interface path name and the file name is case sensitive.",t)}},Blackprint.on("error",{slot:"bp-editor"},function(e){SmallNotif.add(e.message,"red")}),window.addEventListener("error",function(e){let t=e.message||"Something went wrong..";if(t.includes("ResizeObserver"))return e;t=t.replace("Uncaught ",""),SmallNotif.add(t,"red")}),window.addEventListener("onunhandledrejection",function(e){let t=e.message||"Something went wrong..";if(t.includes("ResizeObserver"))return e;t=t.replace("Uncaught ",""),SmallNotif.add(t,"red")}),$(()=>{window.EditorDB=new SFDatabase("EditorDB",{idbVersion:1,websql:!1,structure:{Settings:{$name:["text","unique"],value:"any"}}},function(){Object.assign(EditorDB,{getSettings(e){return new Promise(t=>{this.get("Settings","value",{name:e},t)})},setSettings(e,t){return new Promise(n=>{this.has("Settings",{name:e},a=>{!1===a?this.insert("Settings",{name:e,value:t},n):this.update("Settings",{value:t},{name:e},n)})})}}),async function(){window.EditorWorkingDir=await EditorDB.getSettings("EditorWorkingDir"),null!=EditorWorkingDir&&(Object.setPrototypeOf(EditorWorkingDir,e.prototype),EditorWorkingDir.reconstruct(),$(window).once("click",async()=>{await EditorWorkingDir.handle.requestPermission(),Events.EditorWorkingDirReady=!0,Events.EditorWorkingDirChange()}));$(window).once("beforeunload",function(){EditorDB.setSettings("MyStorage",window.MyStorage)});let t=await EditorDB.getSettings("MyStorage");null!=t&&_.merge(MyStorage,t)}(),Events.DBReady=!0})});class e extends Blackprint.Engine.CustomEvent{constructor(e,t){super(),this.name=e.name,null==e.parentHandle?e._path=this.path=".":this.path=e._path,this.kind="directory",this.handle=e,this.parentHandle=e.parentHandle,delete e.parentHandle}reconstruct(){this.handle.parentHandle=this.parentHandle,this.handle._path=this.path}async move(t){let n=new e(this.handle.rootDirHandle);if("directory"===this.kind)await n.getDirectory(t,!0);else{let e=await n.createFile(t);await e.writeData(await this.readBuffer())}await this.delete()}async resolveHandle(e,t,n=!1){if(t??=this.handle,!e)return t;if(e.constructor!==Array){if("."===e||"./"===e)return t;e.includes("\\")&&(e=e.split("\\").join("/")),e=e.split("/")}let a=e[0];if("."!==a&&""!==a||e.shift(),0===e.length)return t;let i=e.shift();try{var o=await t.getDirectoryHandle(i,{create:n})}catch(e){o=await t.getFileHandle(i)}return null==o?null:(o.rootDirHandle=t.rootDirHandle||t,o.parentHandle=t,o._path=t._path+"/"+i,await this.resolveHandle(e,o,n))}async resolveCustomHandle(n,a,i=!1){let o=await this.resolveHandle(n,a,i);return"directory"===o.kind?new e(o):new t(o,o.parentHandle)}async getDirectory(t,n=!1){return new e(await this.resolveHandle(t,null,n))}async ls(n){let a=await this.resolveHandle(n),i=[];for await(let n of a.values())"file"===n.kind?n=new t(n,a):(n.parentHandle=a,n._path=a._path+"/"+n.name,n=new e(n)),i.push(n);return i}async mkdir(t){return new e(await this.resolveHandle(t,null,!0))}async createFile(e){let n=(e=e.split("/")).pop(),a=await this.resolveHandle(e,null,!0),i=await a.getFileHandle(n).catch(()=>{});if(null!=i)throw new Error("File already exist");return i=await a.getFileHandle(n,{create:!0}),null==i?null:new t(i,a)}async getFile(e){let n=(e=e.split("/")).pop(),a=await this.resolveHandle(e),i=await a.getFileHandle(n).catch(()=>{});return null==i?null:new t(i,a)}async recursiveReadFiles(e){let t={};return this.recursiveGetFileHandles(e,t,null,!0),t}async recursiveGetFileHandles(e,t={},n=new WeakMap,a=!1){let i=await this.ls(e);for(let e=0;e<i.length;e++){let o=i[e];"file"===o.kind?t[o.name]=a?await o.readText():o:(t[o.name]=await o.recursiveGetFileHandles(".",{},n,a),n?.set(t[o.name],o))}return t}async getBlob(e){return await(await this.getFile(e)).getBlob()}async readText(e){return await(await this.getBlob(e)).text()}async readBuffer(e){return await(await this.getBlob(e)).arrayBuffer()}async getStream(e){return await(await this.getBlob(e)).stream()}async writeData(e,t){await(await this.getFile(e)).writeData()}async writeDataAt(e,t,n){await(await this.getFile(e)).writeDataAt(t,n)}async appendData(e,t){await(await this.getFile(e)).appendData(t)}async prependData(e,t){await(await this.getFile(e)).prependData(t)}async delete(){let e=await this.ls();for(let t=0;t<e.length;t++)await e[t].delete();await this.parentHandle.removeEntry(this.name)}}window._CustomDirectory=e;class t{constructor(e,t){this.path=t._path+"/"+e.name,this.name=e.name,this.handle=e,this.dirHandle=t,this.rootDirHandle=t.rootDirHandle,this.kind="file"}async getBlob(){return await await this.handle.getFile()}async readText(){return await(await this.getBlob()).text()}async readBuffer(){return await(await this.getBlob()).arrayBuffer()}async getStream(){return await(await this.getBlob()).stream()}async writeData(e){let t=await this.handle.createWritable({keepExistingData:!1});await t.write(e),await t.close()}async writeDataAt(e,t){let n=await this.handle.createWritable({keepExistingData:!0});await n.seek(e),await n.write(t),await n.close()}async appendData(e){let t=await this.handle.createWritable({keepExistingData:!0});await t.write(e),await t.close()}async prependData(e){let t=await this.handle.createWritable({keepExistingData:!0});await t.seek(0),await t.write(e),await t.close()}async lastModified(){return(await this.handle.getFile()).lastModified}async size(){return(await this.handle.getFile()).size}async type(){return(await this.handle.getFile()).type}async delete(){await this.dirHandle.removeEntry(this.name)}}function NodeHoverInfo(e,t){if($(window).off("pointermove",NodeHoverInfo._move),!t)return clearTimeout(NodeHoverInfo._timer),NodeHoverInfo._show&&ToolTip.set(),void(NodeHoverInfo._show=!1);if(null!=e.event.target.closest(".extra")||0!==e.event.pressure)return void NodeHoverInfo(e,!1);let n=$(e.event.target);n.attr("title")&&n.attr("title",""),n=n.parent(),n.attr("title")&&n.attr("title","");let a=e.event;$(window).on("pointermove",NodeHoverInfo._move=e=>{0!==e.pressure&&NodeHoverInfo(e,!1),a=e}),clearTimeout(NodeHoverInfo._timer),NodeHoverInfo._timer=setTimeout(()=>{ToolTip.set(e.iface,a,"node"),NodeHoverInfo._show=!0},400)}function PortHoverInfo(e,t){if($(window).off("pointermove",PortHoverInfo._move),!t)return clearTimeout(PortHoverInfo._timer),PortHoverInfo._show&&ToolTip.set(),void(PortHoverInfo._show=!1);if(0!==e.event.pressure)return void PortHoverInfo(e,!1);let n=$(e.event.target);n.attr("title")&&n.attr("title","");let a=e.event;$(window).on("pointermove",PortHoverInfo._move=e=>{0!==e.pressure&&PortHoverInfo(e,!1),a=e}),clearTimeout(NodeHoverInfo._timer),clearTimeout(PortHoverInfo._timer),PortHoverInfo._timer=setTimeout(()=>{ToolTip.set(e.port,a,"port"),PortHoverInfo._show=!0},400)}function SuggestNodeTypeCaster(e){if(null==Blackprint.nodes.Data)return;let t,n,{cable:a,port:i,target:o,handler:r}=e;"BP/Fn/Input"!==o.iface.namespace&&"BP/Fn/Output"!==o.iface.namespace&&("input"===a.owner.source?(t=i,n=o):(t=o,n=i),t.type.any||n.type.any||(n.type===Number&&t.type===String?r(()=>{let i=SuggestNodeTypeCaster.createNode("Data/Number/To/String",e,t);a.owner===n?(i.input.In.connectCable(a),i.output.Out.connectPort(t)):(i.input.In.connectPort(n),i.output.Out.connectCable(a))}):n.type!==Function&&t.type===Function?r(()=>{let i=SuggestNodeTypeCaster.createNode("Data/Any/To/Trigger",e,t);a.owner===n?(i.input.Value.connectCable(a),i.output.Call.connectPort(t)):(i.input.Value.connectPort(n),i.output.Call.connectCable(a))}):n.type===String&&t.type===Number&&r(()=>{let i=SuggestNodeTypeCaster.createNode("Data/String/To/Number",e,t);a.owner===n?(i.input.In.connectCable(a),i.output.Out.connectPort(t)):(i.input.In.connectPort(n),i.output.Out.connectCable(a))})))}t.prototype.move=e.prototype.move,NodeHoverInfo._timer=null,NodeHoverInfo._show=!1,NodeHoverInfo._move=()=>{},PortHoverInfo._timer=null,PortHoverInfo._show=!1,PortHoverInfo._move=()=>{},SuggestNodeTypeCaster.primitive=new Set([String,Number,Boolean,BigInt]),SuggestNodeTypeCaster.createNode=function(e,t,n){let a=t.instance,i=n.iface.input._portList.getElement(n).getBoundingClientRect(),o=a.scope("container"),r=o.offset,s=(i.y-o.pos.y-r.y)/o.scale,l=(i.x-o.pos.x-r.x)/o.scale,d=a.createNode(e,{x:l,y:s});return setTimeout(()=>{null!=d.w&&d.moveNode({stopPropagation(){},preventDefault(){},target:d.$el[0],movementX:-(d.w+20)*o.scale,movementY:-2})},300),d};let n=new Blackprint.Engine;function isConnectablePort(e,t){if(t===e)return!0;if(e===Object||t===Object)return!1;if(e.constructor===Array||t.constructor===Array){if(t.constructor===Array){let n=t;t=e,e=n}for(var n=0;n<e.length;n++)if(isConnectablePort(e[n],t))return!0;return!1}return!(!t.any&&!e.any)||t.constructor!==Object&&e.constructor!==Object&&(t.prototype instanceof e||e.prototype instanceof t)}window.engine=n,console.log("-- Do you want to run a sample for engine-js?"),console.log("-- Call engineTest() from this console"),window.engineTest=async function(){if(window.confirm("This action will clear current workspace, are you sure to continue?")){Blackprint.nodes;console.log("-- The sketch and the console was imported from same JSON example, but they're imported in different engine. Any modification from the sketch page will not change the imported console nodes."),await views.goto("/sketch/1"),SketchList.forEach(e=>e.clearNodes()),await SketchList[0].importJSON(sampleList["Random Multiply"]),await n.importJSON(sampleList["Random Multiply"]),console.warn("The engine nodes on this console is using sample from 'Random Multiply'\n> %csampleList[\"Random Multiply\"]","color: gray"),console.warn("If you want to import your JSON, don't forget to run engine.clearNodes() first"),console.log("For obtain engine node:%c\nvar button = engine.iface.myButton;\nvar input = engine.iface.myInput;\nvar logger = engine.iface.myLogger;\n","color: gray"),console.log("To click on invisible button: %cbutton.clicked()","color: gray"),console.log("To set the invisible input: %cinput.data.value = 'hello'","color: gray"),console.log("Or send the input to the handle output directly: %cinput.ref.Output.Value = 'hello'","color: gray"),console.log("To get the logger value: %clogger.ref.Input.Any","color: gray")}},$(function(){window.BPEditor={Dialog:Swal.fire.bind(Swal)},location.hash.includes("%23")&&(location.hash=decodeURIComponent(location.hash)),sf.loader.onProgress(function(e,t){Loading.set(`Loading ${e}/${t}`),e===t&&Loading.set()},!0);let e=sf.URI.data.importSketch;void 0!==e&&requestAnimationFrame(function(){setTimeout(()=>{e=pako.inflateRaw(Base64.toUint8Array(e[0]),{to:"string"}),SketchImporter.loadJSON(e)},500)});let t=sf.URI.data.openExample;null==e&&void 0!==t&&requestAnimationFrame(()=>{setTimeout(()=>ModuleExampleList.addExampleFromURL(t[0]),500)}),setTimeout(()=>{!/android|ios/i.test(navigator.userAgent)&&/chrome/i.test(navigator.userAgent)||sf.model("header").disableVFX(),null!=views.data.page&&/\/sketch\/[0-9]/.test(views.currentPath)&&views.goto("/sketch/1")},100),$(sf.Window).on("resize",e=>{let t=e.target.innerHeight,n=e.target.innerWidth;for(var a=0;a<SketchList.length;a++){if(null==SketchList[a])continue;let e=SketchList[a].scope("container");e.origSize.h<t&&(e.origSize.h=e.size.h=t),e.origSize.w<n&&(e.origSize.w=e.size.w=n)}}),$(function(){/localhost|127\.0\.0\.1|\.repl\.co/.test(location.hostname)&&!location.pathname.includes("/dev.html")&&(location.pathname="/dev.html")}),null!=window.___browserSync___&&window.___browserSync___.socket.on("bp-docs-append",function(e){Blackprint.Sketch.registerDocs(e)}),Blackprint.onModuleConflict=async e=>Object.entries(e).forEach(e=>e.useOld=!1),null!=navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js"),Blackprint.on("menu.create.node",function(e){let{list:t,isSuggestion:n}=e;n&&delete t.Example})}),window.Events=sf.events,$(function(){null==window.SmallNotif&&alert("This editor doesn't seems supported for your browser, please try using Chromium based browser instead"),Events.register("DBReady",!1),Events.register("EditorWorkingDirReady",!1),Events.register("EditorWorkingDirChange")}),sf.model("keyboard-shortcut",e=>{e.workspacePanel=sf.model("project-panel-workspace"),e.projectList=sf.model("project-list"),setTimeout(function(){if(e.initialized)return;e.initialized=!0,$(window).on("keydown",e.workspaceShortcuts)},1),e.workspaceShortcuts=function(t){if(t.ctrlKey&&"s"===t.key)e.saveInstanceTab(t);else if(t.ctrlKey&&"o"===t.key)e.loadInstanceTab(t);else if(t.altKey&&/^[0-9]$/m.test(t.key))e.switchInstanceTab(+t.key);else{if(!t.altKey||"w"!==t.key)return;e.projectList.closeTab(e.projectList.getActiveTab())}t.preventDefault()},e.saveInstanceTab=function(t){e.projectList.saveTab(!0)},e.loadInstanceTab=function(e){console.log("load")},e.switchInstanceTab=function(t){let{projectList:n}=e;0===t&&(t=10),t--;let a=n.list[t];null==a?n.createTab():n.switchTab(a)}});var sampleList={"Empty Sketch":{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.9.x/dist/nodes-decoration.mjs"],instance:{"Decoration/Text/Notes":[{i:0,x:93,y:89,z:0,data:{value:"Hiya!\n\nI'm a placeholder for this sketch container.\n\nYou can delete me by right clicking my header, and create new nodes by right clicking the container."}}]}},"Random Multiply":{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.9.x/dist/nodes-example.mjs"],instance:{"Example/Math/Random":[{i:0,x:298,y:73,output:{Out:[{i:2,name:"A"}]}},{i:1,x:298,y:239,output:{Out:[{i:2,name:"B"}]}}],"Example/Math/Multiply":[{i:2,x:525,y:155,output:{Result:[{i:3,name:"Any"}]}}],"Example/Display/Logger":[{i:3,id:"myLogger",x:763,y:169}],"Example/Button/Simple":[{i:4,id:"myButton",x:41,y:59,output:{Clicked:[{i:2,name:"Exec"}]}}],"Example/Input/Simple":[{i:5,id:"myInput",x:38,y:281,data:{value:"saved input"},output:{Changed:[{i:1,name:"Re-seed"}],Value:[{i:3,name:"Any"}]}}]}},"Audio and Video":{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.9.x/dist/nodes-input.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes-multimedia@0.5.x/dist/nodes-multimedia.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes-pixi.js@0.5.x/dist/nodes-pixijs.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.9.x/dist/nodes-decoration.mjs"],instance:{"Input/UI/File":[{i:0,x:119,y:120,z:12,comment:"Drag and drop your video file here",output:{URL:[{i:7,name:"URL"}]}},{i:1,x:180,y:1096,z:2,comment:"Drag and drop your .gif file here"}],"Multimedia/Audio/Input/Microphone":[{i:2,x:455,y:352,z:11,comment:"Use this if you want to sing :)"}],"Multimedia/Audio/Output/Destination":[{i:3,x:1138,y:131,z:8}],"Multimedia/Audio/Effect/PingPongDelay":[{i:4,x:808,y:127,z:7,comment:"An audio effect for you to try",data:{mix:.5,time:.3,feedback:.5},input_d:{Mix:0,Time:0,Feedback:0},output:{Out:[{i:3,name:"In"}]}}],"Input/UI/Button":[{i:5,x:91,y:198,z:4,output:{Clicked:[{i:7,name:"Play"}]}},{i:6,x:93,y:287,z:5,output:{Clicked:[{i:7,name:"Pause"}]}}],"Multimedia/Player":[{i:7,x:399,y:126,z:13,comment:"Don't forget to connect AudioNode to Destination, or you willn't hear any sound",input_d:{Seek:0},output:{AudioNode:[{i:4,name:"In"}],Element:[{i:10,name:"Source",parentId:0},{i:17,name:"Element",parentId:1}],MediaStreamVideo:[{i:9,name:"VideoTrack",parentId:0}]},output_sw:{MediaStream:1},_cable:{Element:[{x:763,y:192,branch:[{x:775,y:596,branch:[{id:0},{id:1}]}]}],MediaStreamVideo:[{x:820,y:261,branch:[{x:1023,y:259,branch:[{id:0}]}]}]}}],"Input/UI/SliderBox":[{i:8,x:592,y:663,z:10,data:{0:{value:0,min:-100,max:100,step:.1,hideUnusedPort:!1},1:{value:0,min:-100,max:100,step:.1},2:{value:1,min:-100,max:100,step:.1,hideUnusedPort:!1},3:{value:1,min:-100,max:100,step:.1,hideUnusedPort:!1},4:{value:0,min:-100,max:100,step:.1}},output:{0:[{i:10,name:"x"}],1:[{i:10,name:"y"}],2:[{i:10,name:"ScaleX"}],3:[{i:10,name:"ScaleY"}],4:[{i:10,name:"Rotate"}]}}],"Multimedia/Display/Video":[{i:9,x:1065,y:298,z:9}],"Pixi.js/Sprite":[{i:10,x:824,y:612,z:14,output:{Sprite:[{i:12,name:"Sprite"}]}},{i:11,x:695,y:1084,z:16,input_d:{x:0,y:0,ScaleX:1,ScaleY:1,Rotate:0}}],"Pixi.js/Display/Canvas":[{i:12,x:1062,y:554,z:6},{i:13,x:1019,y:1058,z:17,comment:"I can render multiple sprite into one canvas. Let's give it a try by connect to GIF and a video sprice"}],"Pixi.js/Converter/GIF":[{i:14,x:405,y:1096,z:3,input_d:{URL:""}}],"Decoration/Group/Default":[{i:15,x:137,y:925,z:1,data:{width:1218,height:414,title:"GIF Player",color:""}},{i:16,x:58,y:25,z:0,data:{width:1360,height:851,title:"Video Player",color:""}}],"BP_Editor/LeftPanel/Preview":[{i:17,x:827,y:508,z:15}]}}};if("1"===localStorage.offlineSampleModule)for(let a in sampleList)delete sampleList[a].moduleJS;null!=sf.hotReload&&location.pathname,0,window._BPEditorUtils??={};var utils=window._BPEditorUtils;utils._nodeGitHub??={},utils.openNodeSource=async function(e){null==e.node||e instanceof Blackprint.Node||(e=e.node);let t,n=e.iface.namespace,a=n.split("/"),i=Blackprint.nodes,o=SmallNotif.add("Obtaining path","yellow",!1),r=!1;try{for(var s=0;s<a.length;s++)if(i=i[a[s]],null==i)throw new Error("Node namespace was not found: "+n);if(null==i._scopeURL)throw new Error("Can't view source because the node doesn't seems to be loaded from known URL.");if(i.isGenerated)throw new Error("Can't view source of node that was dynamically generated");if(null==utils._nodeGitHub[i._scopeURL]){let e,t,n=i._scopeURL;if(n.includes("@dist/")&&n.includes("/gh/"))e=n.match(/\/\/cdn.jsdelivr.net\/gh\/(.*?)@dist\//)[1];else{if(!n.includes("/dist/"))throw new Error("'/dist/' was not found on the URL: "+n);o.message='Obtaining "package.json"',n=n.split("/dist/")[0];try{t=await $.getJSON(`${n}/package.json`)}catch(e){throw new Error("Failed to fetch '/package.json'")}if(null==t.repository)throw new Error("'repository' field was not found on package.json file");e=t.repository.url.replace(/\.git$/m,"").replace(/https?:\/\/.*?\//,"").replace(/@/,"")}utils._nodeGitHub[i._scopeURL]=`https://cdn.jsdelivr.net/gh/${e}@latest`;let a=t?.blackprint?.source;if(null!=a){for(let e in a)if(i._scopeURL.includes("/"+e)){utils._nodeGitHub[i._scopeURL]+="/"+a[e];break}}else utils._nodeGitHub[i._scopeURL]+="/src"}t=utils._nodeGitHub[i._scopeURL],n=n.replace(/^.*?\//m,"");try{o.message=`Obtaining "${n}.js"`,r=await $.get(t+"/"+n+".js")}catch(e){throw console.error(`File can't be loaded: "${t+"/"+n+".js"}"`),new Error("Source was not found, maybe the settings on package.json was incorrect.")}}catch(e){SmallNotif.add(e.message||"Something went wrong","red"),console.error(e)}let l=SmallNotif.list,d=l.indexOf(o);return-1!==d&&l.splice(d,1),{code:r,githubURL:t,scopeURL:i._scopeURL}},Blackprint.registerNode("BP_Editor/LeftPanel/Preview",(_Class=class extends Blackprint.Node{constructor(e){super(e);let t=this.setInterface();t.title="Editor Preview",t.description="Put element on the left panel",this.iface.on("cable.disconnect",{slot:"bp-editor"},({port:e})=>{"input"===e.source&&this.update()})}update(){let{page:e}=this.instance,t=this.input.Element;null==t&&e.panels.left.setPreview(t),this._returnOldEl();let n=this.instance.page.panels.left;null!=t?(n._oldEl=t,n._oldParentEl=t.parentNode,n._oldNextEl=t.nextSibling):n._oldEl=n._oldParentEl=n._oldNextEl=null,e.panels.left.setPreview(t)}_returnOldEl(){let e=this.instance.page.panels.left;null!=e._oldEl&&null!=e._oldParentEl&&e._oldParentEl.insertBefore(e._oldEl,e._oldNextEl)}destroy(){null!=this.input.Element&&(this.instance.page.panels.left.setPreview(null),this._returnOldEl())}},_Class.input={Element:Element},_Class)),Blackprint.registerNode("BP_Editor/Workspace/Assets/File",(_Class2=class extends Blackprint.Node{constructor(e){super(e);let t=this.setInterface();t.title="Workspace File",t.data={},this.workspace=sf.model("project-panel-workspace")._utils}imported(e){let t=this.iface;t.data.path=e.path;let n=e.path;t.description=n.slice(n.indexOf("/assets")).slice(-25),this.workspace.on("file.change",this._fileChange=async t=>{this.output.Handle=this.workspace.resolvePath(e.path)?.handle||null}),this._fileChange(e)}destroy(){this.workspace.off("file.change",this._fileChange)}},_Class2.output={Handle:FileSystemFileHandle},_Class2)),Blackprint.registerNode("BP_Editor/Workspace/Assets/Directory",(_Class3=class extends Blackprint.Node{constructor(e){super(e);let t=this.setInterface();t.title="Workspace Dir",t.data={},this.workspace=sf.model("project-panel-workspace")._utils}imported(e){let t=this.iface;t.data.path=e.path;let n=e.path;t.description=n.slice(n.indexOf("/assets")).slice(-25),this.workspace.on("file.change",this._fileChange=async t=>{this.output.Handle=this.workspace.resolvePath(e.path)?.handle||null}),this._fileChange(e)}destroy(){this.workspace.off("file.change",this._fileChange)}},_Class3.output={Handle:FileSystemDirectoryHandle},_Class3)),setTimeout(()=>{Blackprint.nodes.BP_Editor.hidden=!0},1e3);var views=new sf.Views("vw-ground","page").on("finish",function(e,t,n){if(e.startsWith("/sketch/")&&t.startsWith("/sketch/"))return views.lastSibling&&$(views.lastSibling).addClass("disable-anim"),void(views.showedSibling?$(views.showedSibling).removeClass("disable-anim"):$(views.currentDOM).removeClass("disable-anim"));animatePageTransition(views)});views.maxCache=100;var modal=new sf.Views("vw-modal",!1);sf.Views.onCrossing=function(e,t){window.open(e,"_blank")};var transitioning=0;function animatePageTransition(e){e.lastSibling&&$(e.lastSibling).animateKey("scaleDown",.6,function(){$(this).addClass("disable-anim")}),e.showedSibling&&$(e.showedSibling).removeClass("disable-anim").animateKey("scaleUpDown",{duration:.6,delay:.3,visible:!1}),clearTimeout(transitioning),transitioning=setTimeout(function(){transitioning=!1,$(e.relatedDOM).removeClass("disable-anim")},1e3)}}
//# sourceMappingURL=myjs.min.js.map
