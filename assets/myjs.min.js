{async function imports(e){return"undefined"!=typeof sf&&void 0!==sf.loader?await sf.loader.mjs(e):Promise.all(e.map((e=>import(e))))}imports.task=function(){return"undefined"!=typeof sf&&void 0!==sf.loader?sf.loader.task:null};var BlackprintEventFallback={error(e){BlackprintEventFallback.error.types[e.type](e.data||e)},"cable.wrong_pair"({port:e,cable:t}){SmallNotif.add(`The cable is not suitable (${t.source}, ${e.source})`,"yellow")},"cable.wrong_type"({cable:e,iface:t,port:o,target:n}){SmallNotif.add(t.title+"> Port from '"+o.iface.title+" - "+o.name+"' was not an "+(n.type._name||n.type.name),"yellow")},"cable.wrong_type_pair"({cable:e,port:t,target:o}){SmallNotif.add(`The cable type is not suitable (${o.type.name}, ${t.type.name})`,"yellow")},"cable.duplicate_removed"({cable:e,port:t}){SmallNotif.add("Duplicated cable removed","yellow")},"cable.replaced"({cable:e,port:t}){SmallNotif.add("Cable was replaced because input doesn't support array","yellow")}};BlackprintEventFallback.error.types={node_port_not_found({iface:e,portName:t}){SmallNotif.add(`Node port not found for ${e.title} with name: ${t}`,"red")},node_not_found({namespace:e}){SmallNotif.add(`Node for ${e} was not found, maybe .registerNode() haven't being called?`,"red")},node_delete_not_found({iface:e}){SmallNotif.add("Node was not found on the list","red"),console.error("Node was not found on the list",e)},node_template_not_found({tagName:e,element:t}){SmallNotif.add(`It seems '${e}' HTML haven't been registered as component or can't be loaded.`,"red"),console.error("It seems '"+e+"' HTML haven't been registered as component or can't be loaded. Please double check the interface file path or name, the interface path name and the file name is case sensitive.",t)}},Blackprint.on("error",{slot:"bp-editor"},(function(e){SmallNotif.add(e.message,"red")})),window.addEventListener("error",(function(e){let t=e.message||"Something went wrong..";t=t.replace("Uncaught ",""),SmallNotif.add(t,"red")})),window.addEventListener("onunhandledrejection",(function(e){let t=e.message||"Something went wrong..";t=t.replace("Uncaught ",""),SmallNotif.add(t,"red")}));let e=new Blackprint.Engine;function NodeHoverInfo(e,t){if($(window).off("pointermove",PortHoverInfo._move),!t)return clearTimeout(NodeHoverInfo._timer),void(NodeHoverInfo._show&&ToolTip.set());let o=$(e.event.target);o.attr("title")&&o.attr("title","");let n=e.event;$(window).on("pointermove",PortHoverInfo._move=e=>n=e),clearTimeout(NodeHoverInfo._timer),NodeHoverInfo._timer=setTimeout((()=>{ToolTip.set(e.iface.namespace,n),NodeHoverInfo._show=!0}),400)}function PortHoverInfo(e,t){if($(window).off("pointermove",PortHoverInfo._move),!t)return clearTimeout(PortHoverInfo._timer),void(PortHoverInfo._show&&ToolTip.set());let o=$(e.event.target);o.attr("title")&&o.attr("title","");let n=e.event;$(window).on("pointermove",PortHoverInfo._move=e=>n=e),clearTimeout(NodeHoverInfo._timer),clearTimeout(PortHoverInfo._timer),PortHoverInfo._timer=setTimeout((()=>{ToolTip.set(e.port.type.name,n),PortHoverInfo._show=!0}),400)}window.engine=e,console.log("-- Do you want to run a sample for engine-js?"),console.log("-- Call engineTest() from this console"),window.engineTest=async function(){if(window.confirm("This action will clear current workspace, are you sure to continue?")){Blackprint.nodes;console.log("-- The sketch and the console was imported from same JSON example, but they're imported in different engine. Any modification from the sketch page will not change the imported console nodes."),await views.goto("/sketch/1"),SketchList.forEach((e=>e.clearNodes())),SketchList[0].importJSON(sampleList["Random Multiply"]),await e.importJSON(sampleList["Random Multiply"]),console.warn("The engine nodes on this console is using sample from 'Random Multiply'\n> %csampleList[\"Random Multiply\"]","color: gray"),console.warn("If you want to import your JSON, don't forget to run engine.clearNodes() first"),console.log("For obtain engine node:%c\nvar button = engine.iface.myButton;\nvar input = engine.iface.myInput;\nvar logger = engine.iface.myLogger;\n","color: gray"),console.log("To click on invisible button: %cbutton.clicked()","color: gray"),console.log("To set the invisible input: %cinput.data.value = 'hello'","color: gray"),console.log("Or send the input to the handle output directly: %cinput.const.Output.Value = 'hello'","color: gray"),console.log("To get the logger value: %clogger.const.Input.Any","color: gray")}},$((function(){location.hash.includes("%23")&&(location.hash=decodeURIComponent(location.hash));let e=sf.URI.data.importSketch;void 0!==e&&(Modal.hide(),setTimeout((()=>{e=pako.inflateRaw(Base64.toUint8Array(e[0]),{to:"string"}),SketchImporter.loadJSON(e)}),1e3)),setTimeout((()=>{!/android|ios/i.test(navigator.userAgent)&&/chrome/i.test(navigator.userAgent)||sf.model("header").disableVFX()}),100),$(sf.Window).on("resize",(e=>{let t=e.target.innerHeight,o=e.target.innerWidth;for(var n=0;n<SketchList.length;n++){let e=SketchList[n].scope("container");e.origSize.h<t&&(e.origSize.h=e.size.h=t),e.origSize.w<o&&(e.origSize.w=e.size.w=o)}})),$((function(){"localhost"!==location.hostname||location.pathname.includes("/dev.html")||(location.pathname="/dev.html")}))})),NodeHoverInfo._timer=null,NodeHoverInfo._show=!0,PortHoverInfo._timer=null,PortHoverInfo._show=!1,PortHoverInfo._move=()=>{};var sampleList={"Empty Sketch":{_:{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-decoration.mjs"]},"Decoration/Text/Notes":[{i:0,x:93,y:89,data:{value:"Hiya!\n\nI'm a placeholder for this sketch container.\n\nYou can delete me by right clicking my header, and create new nodes by right clicking the container."}}]},"Random Multiply":{_:{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-example.mjs"]},"Example/Math/Random":[{i:0,x:298,y:73,output:{Out:[{i:2,name:"A"}]}},{i:1,x:298,y:239,output:{Out:[{i:2,name:"B"}]}}],"Example/Math/Multiply":[{i:2,x:525,y:155,output:{Result:[{i:3,name:"Any"}]}}],"Example/Display/Logger":[{i:3,id:"myLogger",x:763,y:169}],"Example/Button/Simple":[{i:4,id:"myButton",x:41,y:59,output:{Clicked:[{i:2,name:"Exec"}]}}],"Example/Input/Simple":[{i:5,id:"myInput",x:38,y:281,data:{value:"saved input"},output:{Changed:[{i:1,name:"Re-seed"}],Value:[{i:3,name:"Any"}]}}]},"Audio and Video":{_:{moduleJS:["https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-example.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-input.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-decoration.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-console.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes-multimedia@0.2.1/dist/nodes-multimedia.mjs","https://cdn.jsdelivr.net/npm/@blackprint/nodes-pixi.js@0.3.1/dist/nodes-pixijs.mjs"]},"Input/File":[{i:0,x:74,y:26,output:{URL:[{i:7,name:"URL"}]}},{i:1,x:47,y:557}],"Multimedia/Audio/Input/Microphone":[{i:2,x:21,y:321}],"Multimedia/Audio/Output/Destination":[{i:3,x:597,y:273}],"Multimedia/Audio/Effect/PingPongDelay":[{i:4,x:322,y:222,data:{mix:.5,time:.3,feedback:.5},output:{Out:[{i:3,name:"In"}]}}],"Example/Button/Simple":[{i:5,x:35,y:139,output:{Clicked:[{i:7,name:"Play"}]}},{i:6,x:39,y:225,output:{Clicked:[{i:7,name:"Pause"}]}}],"Multimedia/Player":[{i:7,x:325,y:34,output:{AudioNode:[],Element:[],VideoTrack:[{i:9,name:"VideoTrack"}],AudioTrack:[]}}],"Input/SliderBox":[{i:8,x:141,y:417,data:{0:{value:0,min:-100,max:100,step:.1},1:{value:0,min:-100,max:100,step:.1},2:{value:1,min:-100,max:100,step:.1},3:{value:1,min:-100,max:100,step:.1},4:{value:0,min:-100,max:100,step:.1}},output:{0:[{i:10,name:"x"}],1:[{i:10,name:"y"}],2:[{i:10,name:"ScaleX"}],3:[{i:10,name:"ScaleY"}],4:[{i:10,name:"Rotate"}]}}],"Multimedia/Display/Video":[{i:9,x:593,y:25}],"Pixi.js/Sprite":[{i:10,x:364,y:374},{i:11,x:510,y:544}],"Pixi.js/Display/Canvas":[{i:12,x:756,y:269},{i:13,x:749,y:490}],"Pixi.js/Converter/GIF":[{i:14,x:246,y:643}],"Decoration/Text/Notes":[{i:15,x:931,y:27,data:{value:"Sorry it's messy here ｡ﾟ( ﾟ^∀^ﾟ)ﾟ｡\n\nFirst you need to open video file.\nTrigger the play, or connect AudioNode to PingPongDelay first.\n\nThe AudioNode can be connected directly to WebAudio Destination.\n\nMedia Player's Element can be connected to Sprite Source."}},{i:16,x:58,y:737,data:{value:"To begin with GIF animation, open your GIF file.\n\nThen connect to GIF Player.\nConnect the Canvas to Sprite's Source\nthen connect the Sprite to Canvas Visualization."}}]}};if("1"===localStorage.offlineSampleModule)for(let e in sampleList){let t=sampleList[e]._;void 0!==t&&delete t.moduleJS}function SuggestNodeTypeCaster(e){if(null==Blackprint.nodes.Data)return;let t,o,{cable:n,port:i,target:a,handler:l}=e;"input"===n.owner.source?(t=i,o=a):(t=a,o=i),o.type===Number&&t.type===String?l((()=>{let i=SuggestNodeTypeCaster.createNode("Data/Number/To/String",e,t);n.owner===o?(i.input.In.connectCable(n),i.output.Out.connectPort(t)):(i.input.In.connectPort(o),i.output.Out.connectCable(n))})):o.type!==Function&&t.type===Function?l((()=>{let i=SuggestNodeTypeCaster.createNode("Data/Any/To/Trigger",e,t);n.owner===o?(i.input.Value.connectCable(n),i.output.Call.connectPort(t)):(i.input.Value.connectPort(o),i.output.Call.connectCable(n))})):o.type===String&&t.type===Number?l((()=>{let i=SuggestNodeTypeCaster.createNode("Data/String/To/Number",e,t);n.owner===o?(i.input.In.connectCable(n),i.output.Out.connectPort(t)):(i.input.In.connectPort(o),i.output.Out.connectCable(n))})):!SuggestNodeTypeCaster.primitive.has(o.type)&&SuggestNodeTypeCaster.primitive.has(t.type)&&l((()=>{let i=SuggestNodeTypeCaster.createNode("Data/Object/GetValue",e,t);n.owner===o?(i.input.Object.connectCable(n),i.output.Value.connectPort(t)):(i.input.Object.connectPort(o),i.output.Value.connectCable(n))}))}$((()=>{setTimeout((async()=>{await sf.loader.task,null==Blackprint.nodes.Data&&(SmallNotif.add("Loading required nodes","yellow",500),Blackprint.loadModuleFromURL("https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4/dist/nodes-data.mjs",{loadBrowserInterface:!0}))}),3e3)})),SuggestNodeTypeCaster.primitive=new Set([String,Number,Boolean,BigInt]),SuggestNodeTypeCaster.createNode=function(e,t,o){let n=t.instance,i=o.iface.input._list.getElement(o).getBoundingClientRect(),a=n.scope("container"),l=a.offset,r=(i.y-a.pos.y-l.y)/a.scale,s=(i.x-a.pos.x-l.x)/a.scale,c=n.createNode(e,{x:s,y:r});return setTimeout((()=>{null!=c.w&&c.moveNode({stopPropagation(){},preventDefault(){},target:c.$el[0],movementX:-(c.w+20)*a.scale,movementY:-2})}),300),c},window._BPEditorUtils??={};var utils=window._BPEditorUtils;utils._nodeGitHub??={},utils.openNodeSource=async function(e){null==e.node||e instanceof Blackprint.Node||(e=e.node);let t=e.iface.namespace,o=t.split("/"),n=Blackprint.nodes,i=SmallNotif.add("Obtaining path","yellow",!1),a=!1;try{for(var l=0;l<o.length;l++)if(n=n[o[l]],null==n)throw new Error("Node namespace was not found: "+t);if(null==n._scopeURL)throw new Error("Can't view source because the node doesn't seems to be loaded from known URL.");if(n.isGenerated)throw new Error("Can't view source of node that was dynamically generated");if(null==utils._nodeGitHub[n._scopeURL]){let e=n._scopeURL;if(!e.includes("/dist/"))throw new Error("'/dist/' was not found on the URL: "+e);i.message='Obtaining "package.json"',e=e.split("/dist/")[0];try{var r=await $.getJSON(`${e}/package.json`)}catch(e){throw new Error("Failed to fetch '/package.json'")}if(null==r.repository)throw new Error("'repository' field was not found on package.json file");e=r.repository.url.replace(/\.git$/m,"").replace(/https?:\/\/.*?\//,"").replace(/@/,""),utils._nodeGitHub[n._scopeURL]=`https://cdn.jsdelivr.net/gh/${e}@latest`;let t=r.blackprint?.source;if(null!=t){for(let e in t)if(n._scopeURL.includes("/"+e)){utils._nodeGitHub[n._scopeURL]+="/"+t[e];break}}else utils._nodeGitHub[n._scopeURL]+="/src"}let e=utils._nodeGitHub[n._scopeURL];t=t.replace(/^.*?\//m,"");try{i.message=`Obtaining "${t}.js"`,a=await $.get(e+"/"+t+".js")}catch(o){throw console.error(`File can't be loaded: "${e+"/"+t+".js"}"`),new Error("Source was not found, maybe the settings on package.json was incorrect.")}}catch(e){SmallNotif.add(e.message||"Something went wrong","red"),console.error(e)}let s=SmallNotif.list,c=s.indexOf(i);return-1!==c&&s.splice(c,1),a};var EditorHeader=sf.model("header",(function(e,t){e.message="Hello",e.showOptions=!1,e.info={scale:100},e._loadedModuleURL=Blackprint._modulesURL,e._moduleExampleList=[],e.init=function(){sf.URI.parse()},e.mainMenu=function(o){if(!1===e.showOptions)return;let n=SketchList[views.data.page-1];t("dropdown").show([{title:"Sketch",icon:"fa fa-pencil-ruler",deep:[{title:"Open",icon:"fa fa-folder-open",deep:[{title:"From Clipboard",async callback(){let e=await Swal.fire({title:"Paste the JSON here",input:"text"});e=e.value,e&&SketchImporter.loadJSON(e,n)}},{title:"From File",callback(){var e=document.createElement("input");e.setAttribute("type","file"),e.onchange=async function(){if(0===this.files.length)return;if(1!==this.files.length)return console.log(this.files),console.log("Currently only support 1 file"),void SmallNotif.add("Currently only support 1 file","error");let e=JSON.parse(await this.files[0].text());e&&(e=e.trim(),"{"!==e.slice(0,1)&&SmallNotif.add("Data in the file is not a JSON","error")),SketchImporter.loadJSON(e,n)},e.click()}}]},{title:"Export",icon:"fa fa-save",deep:[{title:"To Clipboard",async callback(){let e=await Swal.fire({title:"Choose one of the export mode",cancelButtonText:"Minified JSON",confirmButtonText:"Prettified JS",denyButtonText:"Minimal JSON",denyButtonColor:"gray",showCancelButton:!0,showDenyButton:!0,showCloseButton:!0});if(e.isDismissed&&"backdrop"===e.dismiss)return;let t={};e.isConfirmed?(t.toJS=!0,t.space="\t"):e.isDenied&&(t.position=!1);var o=n.exportJSON(t);navigator.clipboard.writeText(o),Swal.fire({title:"Copied to clipboard!",text:o})}},{title:"To File",callback(){var e=document.createElement("a"),t=new Blob([n.exportJSON()],{type:"application/json"});e.href=URL.createObjectURL(t),e.download="blackprint.json",e.click(),setTimeout((function(){URL.revokeObjectURL(e.href)}),12e4)}},{title:"To URL",callback(){var e=pako.deflateRaw(n.exportJSON()),t=Base64.fromUint8Array(e,!0);sf.URI.data.importSketch=[t],sf.URI.replace();let o=location.href;navigator.clipboard.writeText(o),Swal.fire({title:"Copied to clipboard!",text:o})}}]},{title:"Examples",icon:"fa fa-layer-group",callback(){Modal.goto("/example-list")}},{title:"Reload",icon:"fa fa-sync",async callback(){await Swal.fire({title:"This action will export and reimport current sketch",showCancelButton:!0,showCloseButton:!0});if(confirm.isDismissed&&"backdrop"===confirm.dismiss)return;let e=SketchList[0],t=e.exportJSON();e.clearNodes(),await e.importJSON(t)}}]},{title:"Modules",icon:"fa fa-layer-group",deep:[{title:"Create Custom",icon:"fa fa-plus",hide:void 0===sf.hotReload,callback(){Modal.goto("/custom-node-editor")}},{title:"Loaded module",icon:"fa fa-boxes",callback(){Modal.goto("/module-url")}}]},{title:"Remote",icon:"fa fa-plug",hide:void 0===sf.hotReload,deep:[{title:"Sketch"+(sf.model("modal-remote-sketch-connect").socket?.connected?" ✔️":""),icon:"fa fa-plug",async callback(){let e=sf.model("modal-remote-sketch-connect").socket;e?.connected&&e.disconnect(),Modal.goto("/remote-sketch-connect")}},{title:"Engine"+(sf.model("modal-remote-engine-connect").socket?.connected?" ✔️":""),icon:"fa fa-plug",async callback(){let e=sf.model("modal-remote-engine-connect").socket;e?.connected&&e.disconnect(),Modal.goto("/remote-engine-connect")}},{title:function(){if(void 0===window.___browserSync___)return"Module server";let e=___browserSync___.socket,t=e.connected,o=0===e.io.uri.indexOf(location.origin);return"Module server "+(!t||o?"":"✔️")}(),icon:"fa fa-plug",callback(){if(window.___browserSync___){let e=___browserSync___.socket,t=e.connected,o=0===e.io.uri.indexOf(location.origin);t&&!o&&e.disconnect()}Modal.goto("/dev-mode")}}]},{title:"Development Mode",icon:"fa fa-tools",hide:void 0!==sf.hotReload,callback(){location.pathname="/dev.html"}},{title:"Environment",icon:"fa fa-key",callback(){Modal.goto("/environment-variables")}},{title:"Settings",icon:"fa fa-tools",callback(){Modal.goto("/sketch-settings")}},{title:"Home",icon:"fa fa-home",callback(){views.goto("/")}}],{element:e.$el(".header-left")[0],className:"header-left-menu"})},e.cloneActive=!1,e.cloneContainer=function(){let t=SketchList[views.data.page-1];t.page.cloneContainer(),e.cloneActive=t.page.cloneActive},e.disableVFXActive=!1,e.disableVFX=function(){e.disableVFXActive=!e.disableVFXActive,e.disableVFXActive?$("body").addClass("blackprint-no-vfx"):$("body").removeClass("blackprint-no-vfx"),localStorage.disableVFXActive=e.disableVFXActive?"1":"0"},"1"===localStorage.disableVFXActive&&!1===e.disableVFXActive&&e.disableVFX(),e.visualizeActive=!0,e.visualizeFlow=function(){e.visualizeActive=!e.visualizeActive,Blackprint.settings("visualizeFlow",e.visualizeActive)}})),views=new sf.Views("vw-ground","page").on("finish",(function(e,t,o){animatePageTransition(views)}));views.maxCache=100;var modal=new sf.Views("vw-modal",!1);sf.Views.onCrossing=function(e,t){window.open(e,"_blank")};var transitioning=0;function animatePageTransition(e){e.lastSibling&&$(e.lastSibling).animateKey("scaleDown",.6,(function(){$(this).addClass("disable-anim")})),e.showedSibling&&$(e.showedSibling).removeClass("disable-anim").animateKey("scaleUpDown",{duration:.6,delay:.3,visible:!1}),clearTimeout(transitioning),transitioning=setTimeout((function(){transitioning=!1,$(e.relatedDOM).removeClass("disable-anim")}),1e3)}}
//# sourceMappingURL=myjs.min.js.map
