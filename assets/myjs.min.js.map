{"version":3,"sources":["src/global/BlackprintEventFallback.js","src/global/engine.js","src/global/isConnectablePort.js","src/global/NodeHoverInfo.js","src/global/PortHoverInfo.js","src/global/init.js","src/global/sampleList.js","src/global/SuggestNodeTypeCaster.js","src/global/utils.js","src/model/header.js","src/nodes/editor.js","src/routes/routes.js"],"names":["_class","_temp","async","imports","urls","sf","loader","mjs","Promise","all","map","v","import","task","BlackprintEventFallback","error","types","type","data","port","cable","SmallNotif","add","source","iface","target","title","name","_name","node_port_not_found","portName","node_not_found","namespace","node_delete_not_found","console","node_template_not_found","tagName","element","Blackprint","on","slot","ev","message","window","addEventListener","e","replace","engine","Engine","isConnectablePort","clazz","Object","constructor","Array","i","length","any","prototype","NodeHoverInfo","hovered","$","off","_move","clearTimeout","_timer","_show","ToolTip","set","event","closest","pressure","attr","parent","setTimeout","PortHoverInfo","classAdd","log","engineTest","confirm","nodes","views","goto","SketchList","forEach","sketch","clearNodes","importJSON","sampleList","warn","location","hash","includes","decodeURIComponent","importSketch","URI","Modal","hide","pako","inflateRaw","Base64","toUint8Array","to","SketchImporter","loadJSON","test","navigator","userAgent","model","disableVFX","Window","height","innerHeight","width","innerWidth","container","scope","origSize","h","size","w","hostname","pathname","onModuleConflict","entries","useOld","_","moduleJS","x","y","value","output","Out","Result","id","Clicked","Changed","Value","URL","mix","time","feedback","AudioNode","Element","VideoTrack","AudioTrack","min","max","step","localStorage","offlineSampleModule","key","meta","SuggestNodeTypeCaster","Data","input","handler","owner","Number","String","createNode","In","connectCable","connectPort","Function","Call","primitive","has","loadModuleFromURL","loadBrowserInterface","Set","Boolean","BigInt","instance","rect","_list","getElement","getBoundingClientRect","Ofst","offset","pos","scale","moveNode","stopPropagation","preventDefault","$el","movementX","movementY","_BPEditorUtils","utils","_nodeGitHub","openNodeSource","node","Node","objPath","split","toast","result","Error","_scopeURL","isGenerated","url","packageInfo","getJSON","repository","sourceAlias","blackprint","githubURL","get","list","ii","indexOf","splice","EditorHeader","My","include","showOptions","info","_loadedModuleURL","_modulesURL","_moduleExampleList","init","parse","mainMenu","page","show","icon","deep","val","Swal","fire","callback","el","document","createElement","setAttribute","onchange","this","files","text","JSON","trim","slice","click","cancelButtonText","confirmButtonText","denyButtonText","denyButtonColor","showCancelButton","showDenyButton","showCloseButton","isDismissed","dismiss","option","isConfirmed","toJS","space","isDenied","position","temp","exportJSON","clipboard","writeText","btn","file","Blob","href","createObjectURL","download","revokeObjectURL","compress","deflateRaw","fromUint8Array","loc","hotReload","socket","connected","disconnect","___browserSync___","isConnected","isDefault","io","uri","origin","className","cloneActive","cloneContainer","disableVFXActive","addClass","removeClass","visualizeActive","visualizeFlow","settings","registerNode","super","setInterface","description","update","_instance","panels","left","setPreview","HTMLElement","BP_Editor","hidden","Views","current","animatePageTransition","maxCache","modal","onCrossing","open","transitioning","lastSibling","animateKey","showedSibling","duration","delay","visible","relatedDOM"],"mappings":"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","file":"myjs.min.js","sourcesContent":["// Please use sketch.on('...', callback) instead\r\n// This is used if no one listened to the event\r\nvar BlackprintEventFallback = {\r\n\terror(error){\r\n\t\tBlackprintEventFallback.error.types[error.type](error.data || error);\r\n\t},\r\n\t'cable.wrong_pair'({ port, cable }){\r\n\t\tSmallNotif.add(`The cable is not suitable (${cable.source}, ${port.source})`, 'yellow');\r\n\t},\r\n\t'cable.wrong_type'({ cable, iface, port, target }){\r\n\t\tSmallNotif.add(iface.title+\"> Port from '\"+port.iface.title + \" - \" + port.name+\"' was not an \"+(target.type._name || target.type.name), 'yellow');\r\n\t},\r\n\t'cable.wrong_type_pair'({ cable, port, target }){\r\n\t\tSmallNotif.add(`The cable type is not suitable (${target.type.name}, ${port.type.name})`, 'yellow');\r\n\t},\r\n\t'cable.duplicate_removed'({ cable, port }){\r\n\t\tSmallNotif.add(\"Duplicated cable removed\", 'yellow');\r\n\t},\r\n\t'cable.replaced'({ cable, port }){\r\n\t\tSmallNotif.add(\"Cable was replaced because input doesn't support array\", 'yellow');\r\n\t}\r\n};\r\n\r\nBlackprintEventFallback.error.types = {\r\n\tnode_port_not_found({ iface, portName }){\r\n\t\tSmallNotif.add(`Node port not found for ${iface.title} with name: ${portName}`, 'red');\r\n\t},\r\n\tnode_not_found({ namespace }){\r\n\t\tSmallNotif.add(`Node for ${namespace} was not found, maybe .registerNode() haven't being called?`, 'red')\r\n\t},\r\n\tnode_delete_not_found({ iface }){\r\n\t\tSmallNotif.add(\"Node was not found on the list\", 'red');\r\n\t\tconsole.error(\"Node was not found on the list\", iface);\r\n\t},\r\n\tnode_template_not_found({ tagName, element }){\r\n\t\tSmallNotif.add(`It seems '${tagName}' HTML haven't been registered as component or can't be loaded.`, 'red');\r\n\t\tconsole.error(\"It seems '\"+tagName+\"' HTML haven't been registered as component or can't be loaded. Please double check the interface file path or name, the interface path name and the file name is case sensitive.\", element);\r\n\t},\r\n};\r\n\r\nBlackprint.on('error', {slot: 'bp-editor'}, function(ev){\r\n\tSmallNotif.add(ev.message, 'red');\r\n});\r\n\r\nwindow.addEventListener('error', function(e){\r\n\tlet message = e.message || \"Something went wrong..\";\r\n\tmessage = message.replace('Uncaught ', '');\r\n\r\n\tSmallNotif.add(message, 'red');\r\n});\r\n\r\nwindow.addEventListener('onunhandledrejection', function(e){\r\n\tlet message = e.message || \"Something went wrong..\";\r\n\tmessage = message.replace('Uncaught ', '');\r\n\r\n\tSmallNotif.add(message, 'red');\r\n});","// New engine instance (separated from the editor) that can be accessed from the console\r\nlet engine = new Blackprint.Engine();\r\nwindow.engine = engine;\r\n\r\nconsole.log(\"-- Do you want to run a sample for engine-js?\");\r\nconsole.log(\"-- Call engineTest() from this console\");\r\n\r\nwindow.engineTest = async function(){\r\n\tif(!window.confirm(\"This action will clear current workspace, are you sure to continue?\"))\r\n\t\treturn;\r\n\r\n\t// These nodes are the handler that registered from ./register-handler.js\r\n\tvar registered = Blackprint.nodes;\r\n\r\n\tconsole.log(\"-- The sketch and the console was imported from same JSON example, but they're imported in different engine. Any modification from the sketch page will not change the imported console nodes.\");\r\n\r\n\t// Go to first sketch page\r\n\tawait views.goto('/sketch/1');\r\n\r\n\t// Clear all sketch page\r\n\tSketchList.forEach(sketch => sketch.clearNodes());\r\n\r\n\t// For the editor (sketch page)\r\n\tSketchList[0].importJSON(sampleList[\"Random Multiply\"]);\r\n\r\n\t// For console (on DevTools)\r\n\tawait engine.importJSON(sampleList['Random Multiply']);\r\n\r\n\r\n\t// Just some information when using on DevTools console\r\n\tconsole.warn(`The engine nodes on this console is using sample from 'Random Multiply'\\n> %csampleList[\"Random Multiply\"]`, \"color: gray\");\r\n\tconsole.warn('If you want to import your JSON, don\\'t forget to run engine.clearNodes() first');\r\n\r\n\tconsole.log(`For obtain engine node:%c\r\nvar button = engine.iface.myButton;\r\nvar input = engine.iface.myInput;\r\nvar logger = engine.iface.myLogger;\r\n`, \"color: gray\");\r\n\tconsole.log(\"To click on invisible button: %cbutton.clicked()\", \"color: gray\");\r\n\tconsole.log(\"To set the invisible input: %cinput.data.value = 'hello'\", \"color: gray\");\r\n\tconsole.log(\"Or send the input to the handle output directly: %cinput.const.Output.Value = 'hello'\", \"color: gray\");\r\n\tconsole.log(\"To get the logger value: %clogger.const.Input.Any\", \"color: gray\");\r\n}","function isConnectablePort(source, clazz, target){\r\n\tif(target === clazz)\r\n\t\treturn true;\r\n\r\n\tif(source === 'output'){\r\n\t\tif(clazz === Object) return false;\r\n\r\n\t\tif(clazz.constructor === Array){\r\n\t\t\tfor (var i = 0; i < clazz.length; i++) {\r\n\t\t\t\tif(isConnectablePort(source, clazz[i], target))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(target.any) return true;\r\n\t\tif(target.prototype instanceof clazz)\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\tif(source === 'input'){\r\n\t\tif(target === Object) return false;\r\n\r\n\t\tif(target.constructor === Array){\r\n\t\t\tfor (var i = 0; i < target.length; i++) {\r\n\t\t\t\tif(isConnectablePort(source, target[i], clazz))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(clazz.any) return true;\r\n\t\tif(clazz.prototype instanceof target)\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}","function NodeHoverInfo(ev, hovered){\r\n\t$(window).off('pointermove', NodeHoverInfo._move);\r\n\r\n\tif(!hovered){\r\n\t\tclearTimeout(NodeHoverInfo._timer);\r\n\t\tif(NodeHoverInfo._show) ToolTip.set();\r\n\t\tNodeHoverInfo._show = false;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Skip node decoration and skip if any button was pressed\r\n\tif(ev.event.target.closest('.extra') != null || ev.event.pressure !== 0){\r\n\t\tNodeHoverInfo(ev, false);\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet target = $(ev.event.target);\r\n\tif(!!target.attr('title')) target.attr('title', '');\r\n\r\n\ttarget = target.parent();\r\n\tif(!!target.attr('title')) target.attr('title', '');\r\n\r\n\tlet event = ev.event;\r\n\t$(window).on('pointermove', NodeHoverInfo._move = ev => {\r\n\t\tif(ev.pressure !== 0)\r\n\t\t\tNodeHoverInfo(ev, false);\r\n\r\n\t\tevent = ev;\r\n\t});\r\n\r\n\tclearTimeout(NodeHoverInfo._timer);\r\n\tNodeHoverInfo._timer = setTimeout(()=> {\r\n\t\tToolTip.set(ev.iface.namespace, event);\r\n\t\tNodeHoverInfo._show = true;\r\n\t}, 400);\r\n}\r\n\r\nNodeHoverInfo._timer = null;\r\nNodeHoverInfo._show = false;\r\nNodeHoverInfo._move = ()=>{};","function PortHoverInfo(ev, hovered){\r\n\t$(window).off('pointermove', PortHoverInfo._move);\r\n\r\n\tif(!hovered){\r\n\t\tclearTimeout(PortHoverInfo._timer);\r\n\t\tif(PortHoverInfo._show) ToolTip.set();\r\n\t\tPortHoverInfo._show = false;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Skip if any button was pressed\r\n\tif(ev.event.pressure !== 0){\r\n\t\tPortHoverInfo(ev, false);\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet target = $(ev.event.target);\r\n\tif(!!target.attr('title')) target.attr('title', '');\r\n\r\n\tlet event = ev.event;\r\n\t$(window).on('pointermove', PortHoverInfo._move = ev => {\r\n\t\tif(ev.pressure !== 0)\r\n\t\t\tPortHoverInfo(ev, false);\r\n\t\t\t\r\n\t\tevent = ev;\r\n\t});\r\n\r\n\tclearTimeout(NodeHoverInfo._timer);\r\n\tclearTimeout(PortHoverInfo._timer);\r\n\tPortHoverInfo._timer = setTimeout(()=> {\r\n\t\tToolTip.set((ev.port.classAdd || '') + ev.port.type.name, event);\r\n\t\tPortHoverInfo._show = true;\r\n\t}, 400);\r\n}\r\n\r\nPortHoverInfo._timer = null;\r\nPortHoverInfo._show = false;\r\nPortHoverInfo._move = ()=>{};","$(function(){\r\n\t// Fix for Telegram who encode the URL after the hashtag\r\n\tif((location.hash.includes('%23'))){\r\n\t\tlocation.hash = decodeURIComponent(location.hash)\r\n\t}\r\n\r\n\tlet importSketch = sf.URI.data.importSketch;\r\n\tif(importSketch !== void 0){\r\n\t\tModal.hide();\r\n\r\n\t\tsetTimeout(()=> {\r\n\t\t\timportSketch = pako.inflateRaw(Base64.toUint8Array(importSketch[0]), {to: 'string'});\r\n\t\t\tSketchImporter.loadJSON(importSketch);\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tsetTimeout(()=> {\r\n\t\t// Disable VFX for mobile device or non-chrome browser\r\n\t\tif(/android|ios/i.test(navigator.userAgent) || !/chrome/i.test(navigator.userAgent)){\r\n\t\t\tsf.model('header').disableVFX();\r\n\t\t}\r\n\t}, 100);\r\n\r\n\t$(sf.Window).on('resize', ev => {\r\n\t\tlet height = ev.target.innerHeight;\r\n\t\tlet width = ev.target.innerWidth;\r\n\r\n\t\tfor (var i = 0; i < SketchList.length; i++) {\r\n\t\t\tlet container = SketchList[i].scope('container');\r\n\t\t\tif(container.origSize.h < height)\r\n\t\t\t\tcontainer.origSize.h = container.size.h = height;\r\n\r\n\t\t\tif(container.origSize.w < width)\r\n\t\t\t\tcontainer.origSize.w = container.size.w = width;\r\n\t\t}\r\n\t});\r\n\r\n\t// Auto switch to dev mode when being used on localhost\r\n\t$(function(){\r\n\t\tif(location.hostname === 'localhost' && !location.pathname.includes('/dev.html'))\r\n\t\t\tlocation.pathname = '/dev.html';\r\n\t});\r\n\r\n\t// Always use the newest module\r\n\tBlackprint.onModuleConflict = async map =>{\r\n\t\t// ToDo: show popup to select if user is prefer old version or the newest version\r\n\t\treturn Object.entries(map).forEach(v => v.useOld = false);\r\n\t};\r\n});","var sampleList = {\r\n\t\"Empty Sketch\": {\"_\":{\"moduleJS\":[\"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-decoration.mjs\"]},\"Decoration/Text/Notes\":[{\"i\":0,\"x\":93,\"y\":89,\"data\":{\"value\":\"Hiya!\\n\\nI'm a placeholder for this sketch container.\\n\\nYou can delete me by right clicking my header, and create new nodes by right clicking the container.\"}}]},\r\n\r\n\t\"Random Multiply\": {\"_\":{\"moduleJS\":[\"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-example.mjs\"]},\"Example/Math/Random\":[{\"i\":0,\"x\":298,\"y\":73,\"output\":{\"Out\":[{\"i\":2,\"name\":\"A\"}]}},{\"i\":1,\"x\":298,\"y\":239,\"output\":{\"Out\":[{\"i\":2,\"name\":\"B\"}]}}],\"Example/Math/Multiply\":[{\"i\":2,\"x\":525,\"y\":155,\"output\":{\"Result\":[{\"i\":3,\"name\":\"Any\"}]}}],\"Example/Display/Logger\":[{\"i\":3,\"id\":\"myLogger\",\"x\":763,\"y\":169}],\"Example/Button/Simple\":[{\"i\":4,\"id\":\"myButton\",\"x\":41,\"y\":59,\"output\":{\"Clicked\":[{\"i\":2,\"name\":\"Exec\"}]}}],\"Example/Input/Simple\":[{\"i\":5,\"id\":\"myInput\",\"x\":38,\"y\":281,\"data\":{\"value\":\"saved input\"},\"output\":{\"Changed\":[{\"i\":1,\"name\":\"Re-seed\"}],\"Value\":[{\"i\":3,\"name\":\"Any\"}]}}]},\r\n\r\n\t\"Audio and Video\": {\"_\":{\"moduleJS\":[\"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-example.mjs\", \"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-input.mjs\", \"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-decoration.mjs\", \"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4.0/dist/nodes-console.mjs\", \"https://cdn.jsdelivr.net/npm/@blackprint/nodes-multimedia@0.2.1/dist/nodes-multimedia.mjs\", \"https://cdn.jsdelivr.net/npm/@blackprint/nodes-pixi.js@0.3.1/dist/nodes-pixijs.mjs\"]},\"Input/File\":[{\"i\":0,\"x\":74,\"y\":26,\"output\":{\"URL\":[{\"i\":7,\"name\":\"URL\"}]}},{\"i\":1,\"x\":47,\"y\":557}],\"Multimedia/Audio/Input/Microphone\":[{\"i\":2,\"x\":21,\"y\":321}],\"Multimedia/Audio/Output/Destination\":[{\"i\":3,\"x\":597,\"y\":273}],\"Multimedia/Audio/Effect/PingPongDelay\":[{\"i\":4,\"x\":322,\"y\":222,\"data\":{\"mix\":0.5,\"time\":0.3,\"feedback\":0.5},\"output\":{\"Out\":[{\"i\":3,\"name\":\"In\"}]}}],\"Example/Button/Simple\":[{\"i\":5,\"x\":35,\"y\":139,\"output\":{\"Clicked\":[{\"i\":7,\"name\":\"Play\"}]}},{\"i\":6,\"x\":39,\"y\":225,\"output\":{\"Clicked\":[{\"i\":7,\"name\":\"Pause\"}]}}],\"Multimedia/Player\":[{\"i\":7,\"x\":325,\"y\":34,\"output\":{\"AudioNode\":[],\"Element\":[],\"VideoTrack\":[{\"i\":9,\"name\":\"VideoTrack\"}],\"AudioTrack\":[]}}],\"Input/SliderBox\":[{\"i\":8,\"x\":141,\"y\":417,\"data\":{\"0\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1},\"1\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1},\"2\":{\"value\":1,\"min\":-100,\"max\":100,\"step\":0.1},\"3\":{\"value\":1,\"min\":-100,\"max\":100,\"step\":0.1},\"4\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1}},\"output\":{\"0\":[{\"i\":10,\"name\":\"x\"}],\"1\":[{\"i\":10,\"name\":\"y\"}],\"2\":[{\"i\":10,\"name\":\"ScaleX\"}],\"3\":[{\"i\":10,\"name\":\"ScaleY\"}],\"4\":[{\"i\":10,\"name\":\"Rotate\"}]}}],\"Multimedia/Display/Video\":[{\"i\":9,\"x\":593,\"y\":25}],\"Pixi.js/Sprite\":[{\"i\":10,\"x\":364,\"y\":374},{\"i\":11,\"x\":510,\"y\":544}],\"Pixi.js/Display/Canvas\":[{\"i\":12,\"x\":756,\"y\":269},{\"i\":13,\"x\":749,\"y\":490}],\"Pixi.js/Converter/GIF\":[{\"i\":14,\"x\":246,\"y\":643}],\"Decoration/Text/Notes\":[{\"i\":15,\"x\":931,\"y\":27,\"data\":{\"value\":\"Sorry it's messy here ｡ﾟ( ﾟ^∀^ﾟ)ﾟ｡\\n\\nFirst you need to open video file.\\nTrigger the play, or connect AudioNode to PingPongDelay first.\\n\\nThe AudioNode can be connected directly to WebAudio Destination.\\n\\nMedia Player's Element can be connected to Sprite Source.\"}},{\"i\":16,\"x\":58,\"y\":737,\"data\":{\"value\":\"To begin with GIF animation, open your GIF file.\\n\\nThen connect to GIF Player.\\nConnect the Canvas to Sprite's Source\\nthen connect the Sprite to Canvas Visualization.\"}}]}\r\n};\r\n\r\nif(localStorage.offlineSampleModule === '1'){\r\n\tfor(let key in sampleList){\r\n\t\tlet meta = sampleList[key]._;\r\n\r\n\t\tif(meta !== void 0)\r\n\t\t\tdelete meta.moduleJS;\r\n\t}\r\n}","$(()=>{\r\n\tsetTimeout(async ()=> {\r\n\t\tawait sf.loader.task;\r\n\r\n\t\tif(Blackprint.nodes.Data != null)\r\n\t\t\treturn;\r\n\r\n\t\tSmallNotif.add(\"Loading required nodes\", 'yellow', 500);\r\n\r\n\t\t// Load nodes for data manipulation\r\n\t\tBlackprint.loadModuleFromURL('https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.4/dist/nodes-data.mjs', {\r\n\t\t\tloadBrowserInterface: true\r\n\t\t});\r\n\t}, 3000);\r\n});\r\n\r\nfunction SuggestNodeTypeCaster(ev){\r\n\tif(Blackprint.nodes.Data == null)\r\n\t\treturn;\r\n\r\n\tlet { cable, port, target, handler } = ev;\r\n\r\n\tlet input, output;\r\n\tif(cable.owner.source === 'input'){\r\n\t\tinput = port;\r\n\t\toutput = target;\r\n\t}\r\n\telse {\r\n\t\tinput = target;\r\n\t\toutput = port;\r\n\t}\r\n\r\n\t// Skip untyped port\r\n\tif(input.type.any || output.type.any) return;\r\n\r\n\tif(output.type === Number && input.type === String){\r\n\t\thandler(() => {\r\n\t\t\tlet iface = SuggestNodeTypeCaster.createNode('Data/Number/To/String', ev, input);\r\n\r\n\t\t\tif(cable.owner === output){\r\n\t\t\t\tiface.input.In.connectCable(cable);\r\n\t\t\t\tiface.output.Out.connectPort(input);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tiface.input.In.connectPort(output);\r\n\t\t\t\tiface.output.Out.connectCable(cable);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse if(output.type !== Function && input.type === Function){\r\n\t\thandler(() => {\r\n\t\t\tlet iface = SuggestNodeTypeCaster.createNode('Data/Any/To/Trigger', ev, input);\r\n\r\n\t\t\tif(cable.owner === output){\r\n\t\t\t\tiface.input.Value.connectCable(cable);\r\n\t\t\t\tiface.output.Call.connectPort(input);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tiface.input.Value.connectPort(output);\r\n\t\t\t\tiface.output.Call.connectCable(cable);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse if(output.type === String && input.type === Number){\r\n\t\thandler(() => {\r\n\t\t\tlet iface = SuggestNodeTypeCaster.createNode('Data/String/To/Number', ev, input);\r\n\r\n\t\t\tif(cable.owner === output){\r\n\t\t\t\tiface.input.In.connectCable(cable);\r\n\t\t\t\tiface.output.Out.connectPort(input);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tiface.input.In.connectPort(output);\r\n\t\t\t\tiface.output.Out.connectCable(cable);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse if(!SuggestNodeTypeCaster.primitive.has(output.type) && SuggestNodeTypeCaster.primitive.has(input.type)){\r\n\t\thandler(() => {\r\n\t\t\tlet iface = SuggestNodeTypeCaster.createNode('Data/Object/GetValue', ev, input);\r\n\r\n\t\t\tif(cable.owner === output){\r\n\t\t\t\tiface.input.Object.connectCable(cable);\r\n\t\t\t\tiface.output.Value.connectPort(input);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tiface.input.Object.connectPort(output);\r\n\t\t\t\tiface.output.Value.connectCable(cable);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nSuggestNodeTypeCaster.primitive = new Set([String, Number, Boolean, BigInt]);\r\nSuggestNodeTypeCaster.createNode = function(namespace, ev, input){\r\n\tlet instance =  ev.instance;\r\n\tlet rect = input.iface.input._list.getElement(input).getBoundingClientRect();\r\n\tlet container = instance.scope('container');\r\n\r\n\tlet Ofst = container.offset;\r\n\tlet y = (rect.y - container.pos.y - Ofst.y) / container.scale\r\n\tlet x = (rect.x - container.pos.x - Ofst.x) / container.scale\r\n\tlet iface = instance.createNode(namespace, {x, y});\r\n\r\n\tsetTimeout(()=> {\r\n\t\tif(iface.w == null) return;\r\n\t\tiface.moveNode({\r\n\t\t\tstopPropagation(){}, preventDefault(){},\r\n\t\t\ttarget: iface.$el[0],\r\n\t\t\tmovementX: -(iface.w + 20) * container.scale,\r\n\t\t\tmovementY: -2\r\n\t\t});\r\n\t}, 300);\r\n\r\n\treturn iface;\r\n}","window._BPEditorUtils ??= {};\r\nvar utils = window._BPEditorUtils;\r\n\r\nutils._nodeGitHub ??= {};\r\nutils.openNodeSource = async function(node){\r\n\t// If Blackprint.Interface\r\n\tif(node.node != null && !(node instanceof Blackprint.Node))\r\n\t\tnode = node.node;\r\n\r\n\tlet namespace = node.iface.namespace;\r\n\tlet objPath = namespace.split('/');\r\n\tlet nodes = Blackprint.nodes;\r\n\r\n\tlet toast = SmallNotif.add(\"Obtaining path\", 'yellow', false);\r\n\tlet result = false;\r\n\r\n\ttry{\r\n\t\tfor (var i = 0; i < objPath.length; i++) {\r\n\t\t\tnodes = nodes[objPath[i]];\r\n\t\t\tif(nodes == null) throw new Error(\"Node namespace was not found: \"+namespace);\r\n\t\t}\r\n\r\n\t\tif(nodes._scopeURL == null)\r\n\t\t\tthrow new Error(\"Can't view source because the node doesn't seems to be loaded from known URL.\");\r\n\r\n\t\tif(nodes.isGenerated)\r\n\t\t\tthrow new Error(\"Can't view source of node that was dynamically generated\");\r\n\r\n\t\tif(utils._nodeGitHub[nodes._scopeURL] == null){\r\n\t\t\tlet url = nodes._scopeURL;\r\n\t\t\tif(!url.includes('/dist/')) throw new Error(\"'/dist/' was not found on the URL: \"+url);\r\n\r\n\t\t\ttoast.message = 'Obtaining \"package.json\"';\r\n\r\n\t\t\turl = url.split('/dist/')[0];\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar packageInfo = await $.getJSON(`${url}/package.json`);\r\n\t\t\t} catch(e){\r\n\t\t\t\tthrow new Error(\"Failed to fetch '/package.json'\");\r\n\t\t\t}\r\n\r\n\t\t\tif(packageInfo.repository == null)\r\n\t\t\t\tthrow new Error(\"'repository' field was not found on package.json file\");\r\n\r\n\t\t\turl = packageInfo.repository.url\r\n\t\t\t\t.replace(/\\.git$/m, '')\r\n\t\t\t\t.replace(/https?:\\/\\/.*?\\//, '')\r\n\t\t\t\t.replace(/@/, '');\r\n\r\n\t\t\tutils._nodeGitHub[nodes._scopeURL] = `https://cdn.jsdelivr.net/gh/${url}@latest`;\r\n\r\n\t\t\tlet sourceAlias = packageInfo.blackprint?.source;\r\n\t\t\tif(sourceAlias != null){\r\n\t\t\t\tfor(let key in sourceAlias){\r\n\t\t\t\t\tif(nodes._scopeURL.includes('/'+key)){\r\n\t\t\t\t\t\tutils._nodeGitHub[nodes._scopeURL] += '/'+sourceAlias[key];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse utils._nodeGitHub[nodes._scopeURL] += '/src';\r\n\t\t}\r\n\r\n\t\tlet githubURL = utils._nodeGitHub[nodes._scopeURL];\r\n\t\tnamespace = namespace.replace(/^.*?\\//m, '');\r\n\t\t// return githubURL + '/' + namespace + '.js';\r\n\r\n\t\ttry {\r\n\t\t\ttoast.message = `Obtaining \"${namespace}.js\"`;\r\n\t\t\tresult = await $.get(githubURL + '/' + namespace + '.js');\r\n\t\t} catch(e){\r\n\t\t\tconsole.error(`File can't be loaded: \"${githubURL + '/' + namespace + '.js'}\"`);\r\n\t\t\tthrow new Error(\"Source was not found, maybe the settings on package.json was incorrect.\");\r\n\t\t}\r\n\t} catch(e) {\r\n\t\tSmallNotif.add(e.message || \"Something went wrong\", 'red');\r\n\t\tconsole.error(e);\r\n\t}\r\n\r\n\tlet list = SmallNotif.list;\r\n\tlet ii = list.indexOf(toast);\r\n\r\n\tif(ii !== -1) list.splice(ii, 1);\r\n\r\n\treturn result;\r\n}","// https://www.npmjs.com/package/scarletsframe#initializedefine-model\r\nvar EditorHeader = sf.model('header', function(My, include){\r\n\tMy.message = \"Hello\";\r\n\tMy.showOptions = false;\r\n\tMy.info = {scale:100};\r\n\tMy._loadedModuleURL = Blackprint._modulesURL;\r\n\tMy._moduleExampleList = []; // will be referenced by: /src/routes/+vw-modal/module-example-list.sf\r\n\r\n\tMy.init = function(){\r\n\t\tsf.URI.parse(); // Trigger to reparse current URL\r\n\t}\r\n\r\n\tasync function importJSON(sketch, json){\r\n\t\tLoading.set(\"Importing nodes\");\r\n\t\tsf.loader.onProgress(function(loaded, total){\r\n\t\t\tif(loaded === total)\r\n\t\t\t\tLoading.set(\"Importing nodes\");\r\n\t\t\telse Loading.set(`Downloading ${loaded}/${total}`);\r\n\t\t});\r\n\r\n\t\tawait sketch.importJSON(json);\r\n\t\tLoading.set('');\r\n\t}\r\n\r\n\tMy.mainMenu = function(ev){\r\n\t\tif(My.showOptions === false) return;\r\n\t\tlet sketch = SketchList[views.data.page - 1];\r\n\r\n\t\tinclude('dropdown').show([{\r\n\t\t\ttitle: 'Sketch',\r\n\t\t\ticon: 'fa fa-pencil-ruler',\r\n\t\t\tdeep:[{\r\n\t\t\t\ttitle: 'Open',\r\n\t\t\t\ticon: 'fa fa-folder-open',\r\n\t\t\t\tdeep:[{\r\n\t\t\t\t\ttitle: \"From Clipboard\",\r\n\t\t\t\t\tasync callback(){\r\n\t\t\t\t\t\tlet val = await Swal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Paste the JSON here\",\r\n\t\t\t\t\t\t\tinput: \"text\",\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tval = val.value;\r\n\t\t\t\t\t\tif(!val) return;\r\n\r\n\t\t\t\t\t\tSketchImporter.loadJSON(val, sketch);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: \"From File\",\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar el = document.createElement(\"input\");\r\n\t\t\t\t\t\tel.setAttribute('type', 'file');\r\n\t\t\t\t\t\tel.onchange = async function(){\r\n\t\t\t\t\t\t\tif(this.files.length === 0) return;\r\n\t\t\t\t\t\t\tif(this.files.length !== 1){\r\n\t\t\t\t\t\t\t\tconsole.log(this.files);\r\n\t\t\t\t\t\t\t\tconsole.log(\"Currently only support 1 file\");\r\n\t\t\t\t\t\t\t\tSmallNotif.add('Currently only support 1 file', 'error');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlet text = JSON.parse(await this.files[0].text());\r\n\t\t\t\t\t\t\tif(text){\r\n\t\t\t\t\t\t\t\ttext = text.trim();\r\n\t\t\t\t\t\t\t\tif(text.slice(0, 1) !== '{')\r\n\t\t\t\t\t\t\t\t\tSmallNotif.add('Data in the file is not a JSON', 'error');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tSketchImporter.loadJSON(text, sketch);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tel.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t}, {\r\n\t\t\t\ttitle:'Export',\r\n\t\t\t\ticon: 'fa fa-save',\r\n\t\t\t\tdeep:[{\r\n\t\t\t\t\ttitle: 'To Clipboard',\r\n\t\t\t\t\tasync callback(){\r\n\t\t\t\t\t\tlet confirm = await Swal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Choose one of the export mode\",\r\n\t\t\t\t\t\t\tcancelButtonText: 'Minified JSON',\r\n\t\t\t\t\t\t\tconfirmButtonText: 'Prettified JS',\r\n\t\t\t\t\t\t\tdenyButtonText: 'Minimal JSON',\r\n\t\t\t\t\t\t\tdenyButtonColor: 'gray',\r\n\t\t\t\t\t\t\tshowCancelButton: true,\r\n\t\t\t\t\t\t\tshowDenyButton: true,\r\n\t\t\t\t\t\t\tshowCloseButton: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(confirm.isDismissed && confirm.dismiss === 'backdrop')\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tlet option = {};\r\n\t\t\t\t\t\tif(confirm.isConfirmed){\r\n\t\t\t\t\t\t\toption.toJS = true;\r\n\t\t\t\t\t\t\toption.space = '\\t';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(confirm.isDenied)\r\n\t\t\t\t\t\t\toption.position = false;\r\n\r\n\t\t\t\t\t\tvar temp = sketch.exportJSON(option);\r\n\t\t\t\t\t\tnavigator.clipboard.writeText(temp);\r\n\r\n\t\t\t\t\t\tSwal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Copied to clipboard!\",\r\n\t\t\t\t\t\t\ttext: temp\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: 'To File',\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar btn = document.createElement(\"a\");\r\n\t\t\t\t\t\tvar file = new Blob([sketch.exportJSON()], {type: 'application/json'});\r\n\t\t\t\t\t\tbtn.href = URL.createObjectURL(file);\r\n\t\t\t\t\t\tbtn.download = 'blackprint.json';\r\n\t\t\t\t\t\tbtn.click();\r\n\r\n\t\t\t\t\t\t// Auto revoke after 120 sec\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tURL.revokeObjectURL(btn.href);\r\n\t\t\t\t\t\t}, 120e3);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: 'To URL',\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar compress = pako.deflateRaw(sketch.exportJSON());\r\n\t\t\t\t\t\tvar temp = Base64.fromUint8Array(compress, true);\r\n\r\n\t\t\t\t\t\tsf.URI.data.importSketch = [temp];\r\n\t\t\t\t\t\tsf.URI.replace();\r\n\r\n\t\t\t\t\t\tlet loc = location.href;\r\n\t\t\t\t\t\tnavigator.clipboard.writeText(loc);\r\n\r\n\t\t\t\t\t\tSwal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Copied to clipboard!\",\r\n\t\t\t\t\t\t\ttext: loc\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Examples',\r\n\t\t\t\ticon: 'fa fa-layer-group',\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tModal.goto('/example-list');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Reload',\r\n\t\t\t\ticon: 'fa fa-sync',\r\n\t\t\t\tasync callback(){\r\n\t\t\t\t\tlet val = await Swal.fire({\r\n\t\t\t\t\t\ttitle: \"This action will export and reimport current sketch\",\r\n\t\t\t\t\t\tshowCancelButton: true,\r\n\t\t\t\t\t\tshowCloseButton: true\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(confirm.isDismissed && confirm.dismiss === 'backdrop')\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tlet sketch = SketchList[0];\r\n\t\t\t\t\tlet temp = sketch.exportJSON();\r\n\t\t\t\t\tsketch.clearNodes();\r\n\r\n\t\t\t\t\tawait sketch.importJSON(temp);\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}, {\r\n\t\t\ttitle: 'Modules',\r\n\t\t\ticon: 'fa fa-layer-group',\r\n\t\t\tdeep:[{\r\n\t\t\t\ttitle: 'Create Custom',\r\n\t\t\t\ticon: 'fa fa-plus',\r\n\t\t\t\thide: sf.hotReload === void 0,\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tModal.goto('/custom-node-editor');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Loaded module',\r\n\t\t\t\ticon: 'fa fa-boxes',\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tModal.goto('/module-url');\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}, {\r\n\t\t\ttitle: 'Remote',\r\n\t\t\ticon: 'fa fa-plug',\r\n\t\t\thide: sf.hotReload === void 0,\r\n\t\t\tdeep:[{\r\n\t\t\t\ttitle: 'Sketch' + (sf.model('modal-remote-sketch-connect').socket?.connected ? ' ✔️' : ''),\r\n\t\t\t\ticon: 'fa fa-plug',\r\n\t\t\t\tasync callback(){\r\n\t\t\t\t\tlet socket = sf.model('modal-remote-sketch-connect').socket;\r\n\t\t\t\t\tif(socket?.connected) socket.disconnect();\r\n\r\n\t\t\t\t\tModal.goto('/remote-sketch-connect');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Engine' + (sf.model('modal-remote-engine-connect').socket?.connected ? ' ✔️' : ''),\r\n\t\t\t\ticon: 'fa fa-plug',\r\n\t\t\t\tasync callback(){\r\n\t\t\t\t\tlet socket = sf.model('modal-remote-engine-connect').socket;\r\n\t\t\t\t\tif(socket?.connected) socket.disconnect();\r\n\r\n\t\t\t\t\tModal.goto('/remote-engine-connect');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: (function(){\r\n\t\t\t\t\tif(window.___browserSync___ === void 0)\r\n\t\t\t\t\t\treturn \"Module server\";\r\n\r\n\t\t\t\t\tlet socket = ___browserSync___.socket;\r\n\t\t\t\t\tlet isConnected = socket.connected;\r\n\t\t\t\t\tlet isDefault = socket.io.uri.indexOf(location.origin) === 0;\r\n\r\n\t\t\t\t\treturn 'Module server '+(!isConnected || isDefault ? \"\" : \"✔️\");\r\n\t\t\t\t})(),\r\n\t\t\t\ticon: 'fa fa-plug',\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tif(window.___browserSync___){\r\n\t\t\t\t\t\tlet socket = ___browserSync___.socket;\r\n\t\t\t\t\t\tlet isConnected = socket.connected;\r\n\t\t\t\t\t\tlet isDefault = socket.io.uri.indexOf(location.origin) === 0;\r\n\r\n\t\t\t\t\t\tif(isConnected && !isDefault)\r\n\t\t\t\t\t\t\tsocket.disconnect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tModal.goto('/dev-mode');\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}, {\r\n\t\t\ttitle: 'Development Mode',\r\n\t\t\ticon: 'fa fa-tools',\r\n\t\t\thide: sf.hotReload !== void 0,\r\n\t\t\tcallback(){\r\n\t\t\t\tlocation.pathname = '/dev.html';\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\ttitle: 'Environment',\r\n\t\t\ticon: 'fa fa-key',\r\n\t\t\tcallback(){\r\n\t\t\t\tModal.goto('/environment-variables');\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\ttitle: 'Settings',\r\n\t\t\ticon: 'fa fa-tools',\r\n\t\t\tcallback(){\r\n\t\t\t\tModal.goto('/sketch-settings');\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\ttitle: 'Home',\r\n\t\t\ticon: 'fa fa-home',\r\n\t\t\tcallback(){\r\n\t\t\t\tviews.goto('/');\r\n\t\t\t}\r\n\t\t}], {\r\n\t\t\telement: My.$el('.header-left')[0],\r\n\t\t\tclassName: 'header-left-menu'\r\n\t\t});\r\n\t}\r\n\r\n\tMy.cloneActive = false;\r\n\tMy.cloneContainer = function(){\r\n\t\tlet sketch = SketchList[views.data.page - 1];\r\n\t\tsketch.page.cloneContainer();\r\n\t\tMy.cloneActive = sketch.page.cloneActive;\r\n\t}\r\n\r\n\tMy.disableVFXActive = false;\r\n\tMy.disableVFX = function(){\r\n\t\tMy.disableVFXActive = !My.disableVFXActive;\r\n\r\n\t\tif(My.disableVFXActive)\r\n\t\t\t$('body').addClass('blackprint-no-vfx');\r\n\t\telse $('body').removeClass('blackprint-no-vfx');\r\n\r\n\t\tlocalStorage.disableVFXActive = My.disableVFXActive ? '1' : '0';\r\n\t}\r\n\r\n\tif(localStorage.disableVFXActive === '1' && My.disableVFXActive === false)\r\n\t\tMy.disableVFX();\r\n\r\n\tMy.visualizeActive = true;\r\n\tMy.visualizeFlow = function(){\r\n\t\tMy.visualizeActive = !My.visualizeActive;\r\n\t\tBlackprint.settings('visualizeFlow', My.visualizeActive);\r\n\t}\r\n});","Blackprint.registerNode('BP_Editor/LeftPanel/Preview',\r\nclass extends Blackprint.Node {\r\n\tstatic input = { Element: HTMLElement };\r\n\tconstructor(instance){\r\n\t\tsuper(instance);\r\n\r\n\t\tlet iface = this.setInterface();\r\n\t\tiface.title = \"Editor Preview\"\r\n\t\tiface.description = \"Put element on the left panel\";\r\n\r\n\t\t// Manually call 'update' when any cable from input port was disconnected\r\n\t\tthis.iface.on('cable.disconnect', {slot: 'bp-editor'}, ({ port })=> {\r\n\t\t\tif(port.source === 'input') this.update();\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tlet { page } = this._instance;\r\n\t\tpage.panels.left.setPreview(this.input.Element);\r\n\t}\r\n});\r\n\r\nsetTimeout(() => {\r\n\tBlackprint.nodes.BP_Editor.hidden = true;\r\n}, 1000);","// This project is using file-system directory structure routes\r\n// You can just easily add .sf file inside the views-route\r\n\r\n// ====== Main content routes ======\r\nvar views = (new sf.Views('vw-ground', 'page')) // page = http://url.com/#page/...\r\n.on('finish', function(current, target, data){\r\n\t// Add animation\r\n\tanimatePageTransition(views);\r\n});\r\n\r\n// Increase views limit from 3 into 100\r\nviews.maxCache = 100;\r\n\r\n\r\n// ====== Modal content routes ======\r\nvar modal = (new sf.Views('vw-modal', false)); // false = We don't need to use hashtag route\r\n\r\n\r\n// ====== Handle any cross domain URL ======\r\n// Will throw error if this was not being set\r\nsf.Views.onCrossing = function(url, target){\r\n\twindow.open(url, '_blank');\r\n}\r\n\r\n\r\n// === Function for transitioning page ===\r\n\r\nvar transitioning = 0;\r\nfunction animatePageTransition(views){\r\n\tif(views.lastSibling)\r\n\t\t$(views.lastSibling).animateKey('scaleDown', 0.6, function(){\r\n\t\t\t$(this).addClass('disable-anim');\r\n\t\t});\r\n\r\n\tif(views.showedSibling)\r\n\t\t$(views.showedSibling).removeClass('disable-anim').animateKey('scaleUpDown', {\r\n\t\t\tduration:0.6,\r\n\t\t\tdelay:0.3,\r\n\t\t\tvisible:false\r\n\t\t});\r\n\r\n\t// Make sure showed element is not hidden after animation\r\n\tclearTimeout(transitioning);\r\n\ttransitioning = setTimeout(function(){\r\n\t\ttransitioning = false;\r\n\t\t$(views.relatedDOM).removeClass('disable-anim');\r\n\t}, 1000);\r\n}"]}