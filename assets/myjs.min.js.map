{"version":3,"sources":["src/global/BlackprintEventFallback.js","src/global/engine.js","src/global/init.js","src/global/sampleList.js","src/model/header.js","src/routes/routes.js"],"names":["async","imports","urls","sf","loader","mjs","Promise","all","map","v","import","task","BlackprintEventFallback","error","types","type","data","cable_wrong_pair","port","cable","SmallNotif","add","source","cable_wrong_type","iface","target","title","name","_name","cable_wrong_type_pair","owner","cable_duplicate_removed","cable_replaced","node_port_not_found","portName","node_not_found","namespace","node_delete_not_found","console","node_template_not_found","tagName","element","window","addEventListener","e","engine","Blackprint","Engine","log","engineTest","confirm","nodes","views","goto","SketchList","forEach","sketch","clearNodes","importJSON","sampleList","warn","$","importSketch","URI","Modal","hide","setTimeout","pako","inflateRaw","Base64","toUint8Array","to","SketchImporter","loadJSON","_","moduleJS","i","x","y","value","output","Out","Result","id","Clicked","Changed","Value","model","My","include","message","showOptions","info","scale","init","parse","mainMenu","ev","page","show","icon","deep","val","Swal","fire","input","callback","el","document","createElement","setAttribute","onchange","this","files","length","text","JSON","trim","slice","click","cancelButtonText","confirmButtonText","denyButtonText","denyButtonColor","showCancelButton","showDenyButton","showCloseButton","isDismissed","dismiss","option","isConfirmed","toJS","space","isDenied","position","temp","exportJSON","navigator","clipboard","writeText","btn","file","Blob","href","URL","createObjectURL","download","revokeObjectURL","compress","deflateRaw","fromUint8Array","replace","loc","location","hotReload","___browserSync___","socket","isConnected","connected","isDefault","io","uri","indexOf","origin","pathname","disconnect","$el","className","cloneActive","cloneContainer","switchVFXActive","switchVFX","addClass","visualizeActive","settings","removeClass","visualizeFlow","Views","on","current","animatePageTransition","maxCache","modal","onCrossing","url","open","transitioning","lastSibling","animateKey","showedSibling","duration","delay","visible","clearTimeout","relatedDOM"],"mappings":"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","file":"myjs.min.js","sourcesContent":["// Please use sketch.on('...', callback) instead\n// This is used if no one listened to the event\nvar BlackprintEventFallback = {\n\terror(error){\n\t\tBlackprintEventFallback.error.types[error.type](error.data || error);\n\t},\n\tcable_wrong_pair({ port, cable }){\n\t\tSmallNotif.add(`The cable is not suitable (${cable.source}, ${port.source})`, 'yellow');\n\t},\n\tcable_wrong_type({ cable, iface, source, target }){\n\t\tSmallNotif.add(iface.title+\"> Port from '\"+source.iface.title + \" - \" + source.name+\"' was not an \"+(target.type._name || target.type.name), 'yellow');\n\t},\n\tcable_wrong_type_pair({ cable, target }){\n\t\tSmallNotif.add(`The cable type is not suitable (${cable.owner.type.name}, ${target.type.name})`, 'yellow');\n\t},\n\tcable_duplicate_removed({ cable, target }){\n\t\tSmallNotif.add(\"Duplicated cable removed\", 'yellow');\n\t},\n\tcable_replaced({ cable, target }){\n\t\tSmallNotif.add(\"Cable was replaced because input doesn't support array\", 'yellow');\n\t}\n};\n\nBlackprintEventFallback.error.types = {\n\tnode_port_not_found({ iface, portName }){\n\t\tSmallNotif.add(`Node port not found for ${iface.title} with name: ${portName}`, 'red');\n\t},\n\tnode_not_found({ namespace }){\n\t\tSmallNotif.add(`Node for ${namespace} was not found, maybe .registerNode() haven't being called?`, 'red')\n\t},\n\tnode_delete_not_found({ iface }){\n\t\tSmallNotif.add(\"Node was not found on the list\", 'red');\n\t\tconsole.error(\"Node was not found on the list\", iface);\n\t},\n\tnode_template_not_found({ tagName, element }){\n\t\tSmallNotif.add(`It seems '${tagName}' HTML haven't been registered as component or can't be loaded.`, 'red');\n\t\tconsole.error(\"It seems '\"+tagName+\"' HTML haven't been registered as component or can't be loaded. Please double check the interface file path or name, the interface path name and the file name is case sensitive.\", element);\n\t},\n};\n\nwindow.addEventListener('error', function(e){\n\tSmallNotif.add(\"Something went wrong..\");\n});","// New engine instance (separated from the editor) that can be accessed from the console\nlet engine = new Blackprint.Engine();\n\nconsole.log(\"-- Do you want to run a sample for engine-js?\");\nconsole.log(\"-- Call engineTest() from this console\");\n\nwindow.engineTest = async function(){\n\tif(!window.confirm(\"This action will clear current workspace, are you sure to continue?\"))\n\t\treturn;\n\n\t// These nodes are the handler that registered from ./register-handler.js\n\tvar registered = Blackprint.nodes;\n\n\tconsole.log(\"-- The sketch and the console was imported from same JSON example, but they're imported in different engine. Any modification from the sketch page will not change the imported console nodes.\");\n\n\t// Go to first sketch page\n\tawait views.goto('/sketch/1');\n\n\t// Clear all sketch page\n\tSketchList.forEach(sketch => sketch.clearNodes());\n\n\t// For the editor (sketch page)\n\tSketchList[0].importJSON(sampleList[\"Random Multiply\"]);\n\n\t// For console (on DevTools)\n\tawait engine.importJSON(sampleList['Random Multiply']);\n\n\n\t// Just some information when using on DevTools console\n\tconsole.warn(`The engine nodes on this console is using sample from 'Random Multiply'\\n> %csampleList[\"Random Multiply\"]`, \"color: gray\");\n\tconsole.warn('If you want to import your JSON, don\\'t forget to run engine.clearNodes() first');\n\n\tconsole.log(`For obtain engine node:%c\nvar button = engine.iface.myButton;\nvar input = engine.iface.myInput;\nvar logger = engine.iface.myLogger;\n`, \"color: gray\");\n\tconsole.log(\"To click on invisible button: %cbutton.clicked()\", \"color: gray\");\n\tconsole.log(\"To set the invisible input: %cinput.data.value = 'hello'\", \"color: gray\");\n\tconsole.log(\"Or send the input to the handle output directly: %cinput.const.Output.Value = 'hello'\", \"color: gray\");\n\tconsole.log(\"To get the logger value: %clogger.const.Input.Any\", \"color: gray\");\n}","$(function(){\n\tlet importSketch = sf.URI.data.importSketch;\n\tif(importSketch !== void 0){\n\t\tModal.hide();\n\n\t\tsetTimeout(()=> {\n\t\t\timportSketch = pako.inflateRaw(Base64.toUint8Array(importSketch[0]), {to: 'string'});\n\t\t\tSketchImporter.loadJSON(importSketch);\n\t\t}, 1000);\n\t}\n});","var sampleList = {\n\t\"Empty Sketch\": {\"_\":{\"moduleJS\":[\"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.0.5/dist/nodes-decoration.min.mjs\"]},\"Decoration/Text/Notes\":[{\"i\":0,\"x\":93,\"y\":89,\"data\":{\"value\":\"Hiya!\\n\\nI'm a placeholder for this sketch container.\\n\\nYou can delete me by right clicking my header, and create new nodes by right clicking the container.\"}}]},\n\n\t\"Random Multiply\": {\"_\":{\"moduleJS\":[\"https://cdn.jsdelivr.net/npm/@blackprint/nodes@0.0.5/dist/nodes-example.min.mjs\"]},\"Example/Math/Random\":[{\"i\":0,\"x\":298,\"y\":73,\"output\":{\"Out\":[{\"i\":2,\"name\":\"A\"}]}},{\"i\":1,\"x\":298,\"y\":239,\"output\":{\"Out\":[{\"i\":2,\"name\":\"B\"}]}}],\"Example/Math/Multiply\":[{\"i\":2,\"x\":525,\"y\":155,\"output\":{\"Result\":[{\"i\":3,\"name\":\"Any\"}]}}],\"Example/Display/Logger\":[{\"i\":3,\"id\":\"myLogger\",\"x\":763,\"y\":169}],\"Example/Button/Simple\":[{\"i\":4,\"id\":\"myButton\",\"x\":41,\"y\":59,\"output\":{\"Clicked\":[{\"i\":2,\"name\":\"Exec\"}]}}],\"Example/Input/Simple\":[{\"i\":5,\"id\":\"myInput\",\"x\":38,\"y\":281,\"data\":{\"value\":\"saved input\"},\"output\":{\"Changed\":[{\"i\":1,\"name\":\"Re-seed\"}],\"Value\":[{\"i\":3,\"name\":\"Any\"}]}}]},\n\n\t// \"Audio and Video\": {\"Input/File\":[{\"i\":0,\"x\":74,\"y\":26,\"output\":{\"URL\":[{\"i\":7,\"name\":\"URL\"}]}},{\"i\":1,\"x\":47,\"y\":557}],\"WebAudio/Input/Microphone\":[{\"i\":2,\"x\":21,\"y\":321}],\"WebAudio/Output/Destination\":[{\"i\":3,\"x\":597,\"y\":273}],\"WebAudio/Effect/PingPongDelay\":[{\"i\":4,\"x\":322,\"y\":222,\"data\":{\"mix\":0.5,\"time\":0.3,\"feedback\":0.5},\"output\":{\"Out\":[{\"i\":3,\"name\":\"In\"}]}}],\"Example/Button/Simple\":[{\"i\":5,\"x\":35,\"y\":139,\"output\":{\"Clicked\":[{\"i\":7,\"name\":\"Play\"}]}},{\"i\":6,\"x\":39,\"y\":225,\"output\":{\"Clicked\":[{\"i\":7,\"name\":\"Pause\"}]}}],\"WebAudio/Player\":[{\"i\":7,\"x\":325,\"y\":34,\"output\":{\"AudioNode\":[],\"Element\":[],\"VideoTrack\":[{\"i\":9,\"name\":\"VideoTrack\"}],\"AudioTrack\":[]}}],\"Input/SliderBox\":[{\"i\":8,\"x\":141,\"y\":417,\"data\":{\"0\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1},\"1\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1},\"2\":{\"value\":1,\"min\":-100,\"max\":100,\"step\":0.1},\"3\":{\"value\":1,\"min\":-100,\"max\":100,\"step\":0.1},\"4\":{\"value\":0,\"min\":-100,\"max\":100,\"step\":0.1}},\"output\":{\"0\":[{\"i\":10,\"name\":\"x\"}],\"1\":[{\"i\":10,\"name\":\"y\"}],\"2\":[{\"i\":10,\"name\":\"ScaleX\"}],\"3\":[{\"i\":10,\"name\":\"ScaleY\"}],\"4\":[{\"i\":10,\"name\":\"Rotate\"}]}}],\"WebAudio/Visualize/Video\":[{\"i\":9,\"x\":593,\"y\":25}],\"Graphics/Sprite\":[{\"i\":10,\"x\":364,\"y\":374},{\"i\":11,\"x\":510,\"y\":544}],\"Graphics/Visualize/Canvas\":[{\"i\":12,\"x\":756,\"y\":269},{\"i\":13,\"x\":749,\"y\":490}],\"Graphics/Converter/GIF\":[{\"i\":14,\"x\":246,\"y\":643}],\"Decoration/Text/Notes\":[{\"i\":15,\"x\":931,\"y\":27,\"data\":{\"value\":\"Sorry it's messy here ｡ﾟ( ﾟ^∀^ﾟ)ﾟ｡\\n\\nFirst you need to open video file.\\nTrigger the play, or connect AudioNode to PingPongDelay first.\\n\\nThe AudioNode can be connected directly to WebAudio Destination.\\n\\nMedia Player's Element can be connected to Sprite Source.\"}},{\"i\":16,\"x\":58,\"y\":737,\"data\":{\"value\":\"To begin with GIF animation, open your GIF file.\\n\\nThen connect to GIF Player.\\nConnect the Canvas to Sprite's Source\\nthen connect the Sprite to Canvas Visualization.\"}}]}\n};","// https://www.npmjs.com/package/scarletsframe#initializedefine-model\r\nsf.model('header', function(My, include){\r\n\tMy.message = \"Hello\";\r\n\tMy.showOptions = false;\r\n\tMy.info = {scale:100};\r\n\r\n\tMy.init = function(){\r\n\t\tsf.URI.parse(); // Trigger to reparse current URL\r\n\t}\r\n\r\n\tasync function importJSON(sketch, json){\r\n\t\tLoading.set(\"Importing nodes\");\r\n\t\tsf.loader.onProgress(function(loaded, total){\r\n\t\t\tif(loaded === total)\r\n\t\t\t\tLoading.set(\"Importing nodes\");\r\n\t\t\telse Loading.set(`Downloading ${loaded}/${total}`);\r\n\t\t});\r\n\r\n\t\tawait sketch.importJSON(json);\r\n\t\tLoading.set('');\r\n\t}\r\n\r\n\tMy.mainMenu = function(ev){\r\n\t\tif(My.showOptions === false) return;\r\n\t\tlet sketch = SketchList[views.data.page - 1];\r\n\r\n\t\tinclude('dropdown').show([{\r\n\t\t\ttitle: 'Sketch',\r\n\t\t\ticon: 'fa fa-pencil-ruler',\r\n\t\t\tdeep:[{\r\n\t\t\t\ttitle: 'Open',\r\n\t\t\t\ticon: 'fa fa-folder-open',\r\n\t\t\t\tdeep:[{\r\n\t\t\t\t\ttitle: \"From Clipboard\",\r\n\t\t\t\t\tasync callback(){\r\n\t\t\t\t\t\tlet val = await Swal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Paste the JSON here\",\r\n\t\t\t\t\t\t\tinput: \"text\",\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tval = val.value;\r\n\t\t\t\t\t\tif(!val) return;\r\n\r\n\t\t\t\t\t\tSketchImporter.loadJSON(val, sketch);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: \"From File\",\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar el = document.createElement(\"input\");\r\n\t\t\t\t\t\tel.setAttribute('type', 'file');\r\n\t\t\t\t\t\tel.onchange = async function(){\r\n\t\t\t\t\t\t\tif(this.files.length === 0) return;\r\n\t\t\t\t\t\t\tif(this.files.length !== 1){\r\n\t\t\t\t\t\t\t\tconsole.log(this.files);\r\n\t\t\t\t\t\t\t\tconsole.log(\"Currently only support 1 file\");\r\n\t\t\t\t\t\t\t\tSmallNotif.add('Currently only support 1 file', 'error');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlet text = JSON.parse(await this.files[0].text());\r\n\t\t\t\t\t\t\tif(text){\r\n\t\t\t\t\t\t\t\ttext = text.trim();\r\n\t\t\t\t\t\t\t\tif(text.slice(0, 1) !== '{')\r\n\t\t\t\t\t\t\t\t\tSmallNotif.add('Data in the file is not a JSON', 'error');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tSketchImporter.loadJSON(text, sketch);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tel.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t}, {\r\n\t\t\t\ttitle:'Export',\r\n\t\t\t\ticon: 'fa fa-save',\r\n\t\t\t\tdeep:[{\r\n\t\t\t\t\ttitle: 'To Clipboard',\r\n\t\t\t\t\tasync callback(){\r\n\t\t\t\t\t\tlet confirm = await Swal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Choose one of the export mode\",\r\n\t\t\t\t\t\t\tcancelButtonText: 'Minified JSON',\r\n\t\t\t\t\t\t\tconfirmButtonText: 'Prettified JS',\r\n\t\t\t\t\t\t\tdenyButtonText: 'Minimal JSON',\r\n\t\t\t\t\t\t\tdenyButtonColor: 'gray',\r\n\t\t\t\t\t\t\tshowCancelButton: true,\r\n\t\t\t\t\t\t\tshowDenyButton: true,\r\n\t\t\t\t\t\t\tshowCloseButton: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(confirm.isDismissed && confirm.dismiss === 'backdrop')\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tlet option = {};\r\n\t\t\t\t\t\tif(confirm.isConfirmed){\r\n\t\t\t\t\t\t\toption.toJS = true;\r\n\t\t\t\t\t\t\toption.space = '\\t';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(confirm.isDenied)\r\n\t\t\t\t\t\t\toption.position = false;\r\n\r\n\t\t\t\t\t\tvar temp = sketch.exportJSON(option);\r\n\t\t\t\t\t\tnavigator.clipboard.writeText(temp);\r\n\r\n\t\t\t\t\t\tSwal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Copied to clipboard!\",\r\n\t\t\t\t\t\t\ttext: temp\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: 'To File',\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar btn = document.createElement(\"a\");\r\n\t\t\t\t\t\tvar file = new Blob([sketch.exportJSON()], {type: 'application/json'});\r\n\t\t\t\t\t\tbtn.href = URL.createObjectURL(file);\r\n\t\t\t\t\t\tbtn.download = 'blackprint.json';\r\n\t\t\t\t\t\tbtn.click();\r\n\r\n\t\t\t\t\t\t// Auto revoke after 120 sec\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tURL.revokeObjectURL(btn.href);\r\n\t\t\t\t\t\t}, 120e3);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: 'To URL',\r\n\t\t\t\t\tcallback(){\r\n\t\t\t\t\t\tvar compress = pako.deflateRaw(sketch.exportJSON());\r\n\t\t\t\t\t\tvar temp = Base64.fromUint8Array(compress, true);\r\n\r\n\t\t\t\t\t\tsf.URI.data.importSketch = [temp];\r\n\t\t\t\t\t\tsf.URI.replace();\r\n\r\n\t\t\t\t\t\tlet loc = location.href;\r\n\t\t\t\t\t\tnavigator.clipboard.writeText(loc);\r\n\r\n\t\t\t\t\t\tSwal.fire({\r\n\t\t\t\t\t\t\ttitle: \"Copied to clipboard!\",\r\n\t\t\t\t\t\t\ttext: loc\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t}]\r\n\t\t}, {\r\n\t\t\ttitle: 'Modules',\r\n\t\t\ticon: 'fa fa-layer-group',\r\n\t\t\tdeep:[{\r\n\t\t\t\ttitle: 'Create Custom',\r\n\t\t\t\ticon: 'fa fa-plus',\r\n\t\t\t\thide: sf.hotReload === void 0,\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tModal.goto('/custom-node-editor');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: (function(){\r\n\t\t\t\t\tif(sf.hotReload === void 0)\r\n\t\t\t\t\t\treturn \"Development Mode\";\r\n\r\n\t\t\t\t\tif(window.___browserSync___ === void 0)\r\n\t\t\t\t\t\treturn \"Connect to module server\";\r\n\r\n\t\t\t\t\tlet socket = ___browserSync___.socket;\r\n\t\t\t\t\tlet isConnected = socket.connected;\r\n\t\t\t\t\tlet isDefault = socket.io.uri.indexOf(location.origin) === 0;\r\n\r\n\t\t\t\t\treturn (!isConnected || isDefault ? \"Connect to\" : \"Disconnect from\")+' module server';\r\n\t\t\t\t})(),\r\n\t\t\t\ticon: 'fa fa-plug',\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tif(sf.hotReload === void 0)\r\n\t\t\t\t\t\treturn location.pathname = '/dev.html';\r\n\r\n\t\t\t\t\tif(window.___browserSync___){\r\n\t\t\t\t\t\tlet socket = ___browserSync___.socket;\r\n\t\t\t\t\t\tlet isConnected = socket.connected;\r\n\t\t\t\t\t\tlet isDefault = socket.io.uri.indexOf(location.origin) === 0;\r\n\r\n\t\t\t\t\t\tif(isConnected && !isDefault)\r\n\t\t\t\t\t\t\tsocket.disconnect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tModal.goto('/dev-mode');\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Loaded from URL',\r\n\t\t\t\ticon: 'fa fa-truck-loading',\r\n\t\t\t\tcallback(){\r\n\t\t\t\t\tModal.goto('/module-url');\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}, {\r\n\t\t\ttitle: 'Environment',\r\n\t\t\ticon: 'fa fa-key',\r\n\t\t\tcallback(){\r\n\t\t\t\tModal.goto('/environment-variables');\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\ttitle: 'Home',\r\n\t\t\ticon: 'fa fa-home',\r\n\t\t\tcallback(){\r\n\t\t\t\tviews.goto('/');\r\n\t\t\t}\r\n\t\t}], {\r\n\t\t\telement: My.$el('.header-left')[0],\r\n\t\t\tclassName: 'header-left-menu'\r\n\t\t});\r\n\t}\r\n\r\n\tMy.cloneActive = false;\r\n\tMy.cloneContainer = function(){\r\n\t\tlet sketch = SketchList[views.data.page - 1];\r\n\t\tsketch.page.cloneContainer();\r\n\t\tMy.cloneActive = sketch.page.cloneActive;\r\n\t}\r\n\r\n\tMy.switchVFXActive = false;\r\n\tMy.switchVFX = function(){\r\n\t\tMy.switchVFXActive = !My.switchVFXActive;\r\n\r\n\t\tif(My.switchVFXActive){\r\n\t\t\t$('body').addClass('blackprint-no-vfx');\r\n\t\t\tMy.visualizeActive = false;\r\n\t\t\tBlackprint.settings('visualizeFlow', false);\r\n\t\t}\r\n\t\telse $('body').removeClass('blackprint-no-vfx');\r\n\t}\r\n\r\n\tMy.visualizeActive = true;\r\n\tMy.visualizeFlow = function(){\r\n\t\tMy.visualizeActive = !My.visualizeActive;\r\n\t\tBlackprint.settings('visualizeFlow', My.visualizeActive);\r\n\t}\r\n});","// This project is using file-system directory structure routes\n// You can just easily add .sf file inside the views-route\n\n// ====== Main content routes ======\nvar views = (new sf.Views('vw-ground', 'page')) // page = http://url.com/#page/...\n.on('finish', function(current, target, data){\n\t// Add animation\n\tanimatePageTransition(views);\n});\n\n// Increase views limit from 3 into 100\nviews.maxCache = 100;\n\n\n// ====== Modal content routes ======\nvar modal = (new sf.Views('vw-modal', false)); // false = We don't need to use hashtag route\n\n\n// ====== Handle any cross domain URL ======\n// Will throw error if this was not being set\nsf.Views.onCrossing = function(url, target){\n\twindow.open(url, '_blank');\n}\n\n\n// === Function for transitioning page ===\n\nvar transitioning = 0;\nfunction animatePageTransition(views){\n\tif(views.lastSibling)\n\t\t$(views.lastSibling).animateKey('scaleDown', 0.6, function(){\n\t\t\t$(this).addClass('disable-anim');\n\t\t});\n\n\tif(views.showedSibling)\n\t\t$(views.showedSibling).removeClass('disable-anim').animateKey('scaleUpDown', {\n\t\t\tduration:0.6,\n\t\t\tdelay:0.3,\n\t\t\tvisible:false\n\t\t});\n\n\t// Make sure showed element is not hidden after animation\n\tclearTimeout(transitioning);\n\ttransitioning = setTimeout(function(){\n\t\ttransitioning = false;\n\t\t$(views.relatedDOM).removeClass('disable-anim');\n\t}, 1000);\n}"]}